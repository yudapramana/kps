import{F as u,G as C,J as j,P as m,Q as v,R as t,ah as n,av as U,ap as d,W as F,a5 as h,aw as L,U as o,T as k,S as w,Z as J}from"./pinia-BDOwh8JO.js";import{b as f,e as P}from"./app-Cc4vFrcH.js";import{S as T}from"./sweetalert2.esm.all-9Qm2jZ7z.js";const q={class:"content"},H={class:"container-fluid"},O={class:"card"},I={class:"card-header"},W={class:"d-flex justify-content-between align-items-center w-100"},z={class:"card-body table-responsive p-0"},G={class:"table table-bordered table-hover text-sm mb-0"},Q={key:0},R={key:1},Z={class:"text-muted"},K={class:"text-muted"},X={class:"text-center"},Y={class:"text-center"},tt={class:"btn-group btn-group-sm"},st=["onClick"],et=["onClick"],lt={class:"card-footer clearfix py-2"},at={class:"d-flex justify-content-between align-items-center"},ot={class:"text-muted text-sm"},nt={class:"pagination pagination-sm m-0"},it={class:"page-item disabled"},dt={class:"page-link"},ut={class:"modal fade",id:"eventModal"},rt={class:"modal-dialog modal-lg"},mt={class:"modal-content"},vt={class:"modal-header py-2"},pt={class:"modal-title"},ct={class:"modal-body"},bt={class:"row"},ft={class:"col-md-6"},_t={class:"form-group"},gt={class:"form-group"},xt={class:"form-group"},yt={class:"form-group"},kt={class:"col-md-6"},wt={class:"form-group"},Et={class:"form-group"},Vt={class:"form-group"},Mt={class:"form-group"},St={class:"form-group"},Ct={class:"row"},Ut={class:"col-md-6"},$t={class:"form-group"},ht={class:"col-md-6"},Tt={class:"form-group"},Bt=["min"],Dt={class:"text-right mt-3"},Nt=["disabled"],Jt={__name:"EventList",setup(At){const E=T.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),_=u([]),a=u({}),p=u(""),c=u(10),g=u(!1),b=u(!1),x=u(!1),l=u({id:null,name:"",theme:"",description:"",start_date:"",end_date:"",early_bird_end_date:"",submission_open_at:"",submission_deadline_at:"",notification_date:"",submission_close_at:"",submission_is_active:!0,location:"",venue:"",is_active:!1}),r=async(i=1)=>{g.value=!0;const s=await f.get("/api/v1/events",{params:{page:i,per_page:c.value,search:p.value}});_.value=s.data.data.data,a.value=s.data.data,g.value=!1},B=()=>{b.value=!1,Object.assign(l.value,{id:null,name:"",theme:"",description:"",start_date:"",end_date:"",early_bird_end_date:"",submission_open_at:"",submission_deadline_at:"",notification_date:"",submission_close_at:"",submission_is_active:!0,location:"",venue:"",is_active:!1}),$("#eventModal").modal("show")},D=i=>{b.value=!0,l.value={...i},$("#eventModal").modal("show")},N=async()=>{x.value=!0;try{b.value?(await f.put(`/api/v1/events/${l.value.id}`,l.value),E.fire({icon:"success",title:"Event diperbarui"})):(await f.post("/api/v1/events",l.value),E.fire({icon:"success",title:"Event ditambahkan"})),$("#eventModal").modal("hide"),r(a.value.current_page)}finally{x.value=!1}},A=async i=>{(await T.fire({title:"Hapus event?",showCancelButton:!0})).isConfirmed&&(await f.delete(`/api/v1/events/${i.id}`),r(a.value.current_page))},V=i=>r(i);C(p,P(()=>r(1),400)),C(c,()=>r(1)),j(r);const M=i=>{if(!i)return"-";const[s,e,y]=i.substring(0,10).split("-");return`${y} ${["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"][e-1]} ${s}`};return(i,s)=>(v(),m(h,null,[t("section",{class:"content-header"},[t("div",{class:"container-fluid"},[t("div",{class:"d-flex justify-content-between align-items-center"},[s[15]||(s[15]=t("div",null,[t("h1",{class:"mb-1"},"Events"),t("p",{class:"mb-0 text-muted text-sm"}," Manajemen data event (tanggal, lokasi, status). ")],-1)),t("button",{class:"btn btn-primary btn-sm",onClick:B}," + Tambah Event ")])])]),t("section",q,[t("div",H,[t("div",O,[t("div",I,[t("div",W,[t("div",null,[s[17]||(s[17]=t("label",{class:"mb-0 mr-1 text-sm text-muted"},"Tampilkan",-1)),n(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),class:"form-control form-control-sm d-inline-block w-auto"},s[16]||(s[16]=[t("option",{value:10},"10",-1),t("option",{value:25},"25",-1),t("option",{value:50},"50",-1)]),512),[[U,c.value,void 0,{number:!0}]]),s[18]||(s[18]=t("span",{class:"text-sm text-muted ml-1"},"Entri",-1))]),n(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>p.value=e),type:"text",class:"form-control form-control-sm w-auto",style:{"min-width":"240px"},placeholder:"Cari nama / tema / lokasi..."},null,512),[[d,p.value]])])]),t("div",z,[t("table",G,[s[25]||(s[25]=t("thead",{class:"thead-light"},[t("tr",null,[t("th",{style:{width:"40px"}},"#"),t("th",null,"Nama Event"),t("th",null,"Tanggal"),t("th",null,"Lokasi"),t("th",{style:{width:"90px"},class:"text-center"},"Status"),t("th",{style:{width:"110px"},class:"text-center"},"Aksi")])],-1)),t("tbody",null,[g.value?(v(),m("tr",Q,s[19]||(s[19]=[t("td",{colspan:"6",class:"text-center"},"Memuat data...",-1)]))):_.value.length===0?(v(),m("tr",R,s[20]||(s[20]=[t("td",{colspan:"6",class:"text-center text-muted"}," Belum ada event. ",-1)]))):F("",!0),(v(!0),m(h,null,L(_.value,(e,y)=>(v(),m("tr",{key:e.id},[t("td",null,o(y+1+(a.value.current_page-1)*a.value.per_page),1),t("td",null,[t("strong",null,o(e.name),1),s[21]||(s[21]=t("br",null,null,-1)),t("small",Z,o(e.theme||"-"),1)]),t("td",null,o(M(e.start_date))+" – "+o(M(e.end_date)),1),t("td",null,[J(o(e.location||"-"),1),s[22]||(s[22]=t("br",null,null,-1)),t("small",K,o(e.venue||"-"),1)]),t("td",X,[t("span",{class:k(["badge",e.is_active?"badge-success":"badge-secondary"])},o(e.is_active?"Aktif":"Nonaktif"),3)]),t("td",Y,[t("div",tt,[t("button",{class:"btn btn-warning",onClick:S=>D(e)},s[23]||(s[23]=[t("i",{class:"fas fa-edit"},null,-1)]),8,st),t("button",{class:"btn btn-danger",onClick:S=>A(e)},s[24]||(s[24]=[t("i",{class:"fas fa-trash"},null,-1)]),8,et)])])]))),128))])])]),t("div",lt,[t("div",at,[t("div",ot," Menampilkan "+o(a.value.from||0)+" - "+o(a.value.to||0)+" dari "+o(a.value.total||0)+" data ",1),t("ul",nt,[t("li",{class:k(["page-item",{disabled:a.value.current_page===1}])},[t("a",{href:"#",class:"page-link",onClick:s[2]||(s[2]=w(e=>V(a.value.current_page-1),["prevent"]))},"«")],2),t("li",it,[t("span",dt," Halaman "+o(a.value.current_page)+" / "+o(a.value.last_page),1)]),t("li",{class:k(["page-item",{disabled:a.value.current_page===a.value.last_page}])},[t("a",{href:"#",class:"page-link",onClick:s[3]||(s[3]=w(e=>V(a.value.current_page+1),["prevent"]))},"»")],2)])])])])]),t("div",ut,[t("div",rt,[t("div",mt,[t("div",vt,[t("h5",pt,o(b.value?"Edit Event":"Tambah Event"),1),s[26]||(s[26]=t("button",{type:"button",class:"close","data-dismiss":"modal"},[t("span",null,"×")],-1))]),t("div",ct,[t("form",{onSubmit:w(N,["prevent"])},[s[41]||(s[41]=t("h6",{class:"text-muted mb-3"},"Basic Event Information",-1)),t("div",bt,[t("div",ft,[t("div",_t,[s[27]||(s[27]=t("label",null,"Nama Event",-1)),n(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>l.value.name=e),class:"form-control form-control-sm",required:""},null,512),[[d,l.value.name]])]),t("div",gt,[s[28]||(s[28]=t("label",null,"Tema",-1)),n(t("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>l.value.theme=e),class:"form-control form-control-sm"},null,512),[[d,l.value.theme]])]),t("div",xt,[s[29]||(s[29]=t("label",null,"Lokasi",-1)),n(t("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>l.value.location=e),class:"form-control form-control-sm"},null,512),[[d,l.value.location]])]),t("div",yt,[s[30]||(s[30]=t("label",null,"Venue",-1)),n(t("input",{"onUpdate:modelValue":s[7]||(s[7]=e=>l.value.venue=e),class:"form-control form-control-sm"},null,512),[[d,l.value.venue]])])]),t("div",kt,[t("div",wt,[s[31]||(s[31]=t("label",null,"Tanggal Mulai",-1)),n(t("input",{"onUpdate:modelValue":s[8]||(s[8]=e=>l.value.start_date=e),type:"date",class:"form-control form-control-sm",required:""},null,512),[[d,l.value.start_date]])]),t("div",Et,[s[32]||(s[32]=t("label",null,"Tanggal Selesai",-1)),n(t("input",{"onUpdate:modelValue":s[9]||(s[9]=e=>l.value.end_date=e),type:"date",class:"form-control form-control-sm",required:""},null,512),[[d,l.value.end_date]])]),t("div",Vt,[s[33]||(s[33]=t("label",null,"Early Bird End Date",-1)),n(t("input",{"onUpdate:modelValue":s[10]||(s[10]=e=>l.value.early_bird_end_date=e),type:"date",class:"form-control form-control-sm"},null,512),[[d,l.value.early_bird_end_date]])]),t("div",Mt,[s[35]||(s[35]=t("label",null,"Status Event",-1)),n(t("select",{"onUpdate:modelValue":s[11]||(s[11]=e=>l.value.is_active=e),class:"form-control form-control-sm"},s[34]||(s[34]=[t("option",{value:!0},"Aktif",-1),t("option",{value:!1},"Nonaktif",-1)]),512),[[U,l.value.is_active]])])])]),t("div",St,[s[36]||(s[36]=t("label",null,"Deskripsi",-1)),n(t("textarea",{"onUpdate:modelValue":s[12]||(s[12]=e=>l.value.description=e),class:"form-control form-control-sm",rows:"3"},null,512),[[d,l.value.description]])]),s[42]||(s[42]=t("hr",null,null,-1)),s[43]||(s[43]=t("h6",{class:"text-muted mb-3"},"Submission Settings",-1)),t("div",Ct,[t("div",Ut,[t("div",$t,[s[37]||(s[37]=t("label",null,"Submission Open At",-1)),n(t("input",{"onUpdate:modelValue":s[13]||(s[13]=e=>l.value.submission_open_at=e),type:"datetime-local",step:"60",class:"form-control form-control-sm"},null,512),[[d,l.value.submission_open_at]]),s[38]||(s[38]=t("small",{class:"text-muted"}," Waktu mulai pengiriman abstract / case ",-1))])]),t("div",ht,[t("div",Tt,[s[39]||(s[39]=t("label",null,"Submission Deadline",-1)),n(t("input",{"onUpdate:modelValue":s[14]||(s[14]=e=>l.value.submission_deadline_at=e),type:"datetime-local",step:"60",min:l.value.submission_open_at||null,class:"form-control form-control-sm"},null,8,Bt),[[d,l.value.submission_deadline_at]]),s[40]||(s[40]=t("small",{class:"text-muted"}," Harus setelah waktu open ",-1))])])]),t("div",Dt,[t("button",{class:"btn btn-primary btn-sm",disabled:x.value}," Simpan ",8,Nt)])],32)])])])])])],64))}};export{Jt as default};
