import{F as o,G as x,J as N,P as d,Q as r,as as U,R as t,ah as _,av as h,ap as D,T as m,W as w,a5 as P,aw as L,U as n,S as C,Z as S}from"./pinia-BDOwh8JO.js";import{_ as H,b as M,e as O}from"./app-qojnDOIY.js";import{S as T}from"./sweetalert2.esm.all-9Qm2jZ7z.js";const z={class:"content"},J={class:"container-fluid"},G={class:"card"},I={class:"card-header"},Q={class:"d-flex justify-content-between align-items-center w-100 flex-wrap gap-2"},W={class:"d-flex align-items-center gap-2 flex-wrap"},Z={class:"d-flex align-items-center gap-2"},q=["disabled"],K={class:"card-body table-responsive p-0"},X={class:"table table-bordered table-hover text-sm mb-0"},Y={key:0},tt={key:1},at={class:"text-center"},et=["onClick"],st={class:"card-footer clearfix py-2"},lt={class:"d-flex justify-content-between align-items-center"},nt={class:"text-muted text-sm"},ot={class:"pagination pagination-sm m-0"},it={class:"page-item disabled"},dt={class:"page-link"},rt={class:"modal fade",id:"paperFinalModal"},ut={class:"modal-dialog modal-lg modal-dialog-scrollable"},pt={class:"modal-content"},ct={key:0,class:"modal-body"},mt={class:"fw-bold mb-1"},vt={class:"text-muted small mb-3"},bt={class:"form-group"},ft={class:"modal-footer py-2"},gt=["disabled"],_t={key:0,class:"spinner-border spinner-border-sm me-1"},yt={__name:"PaperFinalList",setup(xt){const V=T.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),y=o([]),s=o({}),v=o(""),b=o(10),f=o(""),u=o(!1),p=o(null),c=o(""),g=o(!1),i=async(l=1)=>{u.value=!0;try{const a=await M.get("/api/v1/papers/final",{params:{page:l,per_page:b.value,search:v.value,paper_type:f.value}});y.value=a.data.data.data,s.value=a.data.data}finally{u.value=!1}},B=l=>{p.value=l,c.value=l.final_status,$("#paperFinalModal").modal("show")},E=async()=>{if(!c.value)return T.fire({icon:"warning",title:"Final status belum dipilih"});g.value=!0;try{await M.put(`/api/v1/papers/${p.value.id}/final`,{final_status:c.value}),V.fire({icon:"success",title:"Final presentation disimpan"}),$("#paperFinalModal").modal("hide"),i(s.value.current_page)}finally{g.value=!1}},R=l=>{var a;return((a=l==null?void 0:l.paper_type)==null?void 0:a.code)==="RESEARCH"?"badge-info":"badge-purple"},j=l=>l==="oral_presentation"?"Oral":"Poster",k=l=>i(l);return x(v,O(()=>i(1),400)),x(b,()=>i(1)),x(f,()=>i(1)),N(i),(l,a)=>(r(),d(P,null,[a[21]||(a[21]=U('<section class="content-header" data-v-ddf0babc><div class="container-fluid" data-v-ddf0babc><div class="d-flex justify-content-between align-items-center" data-v-ddf0babc><div data-v-ddf0babc><h1 class="mb-1" data-v-ddf0babc>Paper Finalization</h1><p class="mb-0 text-muted text-sm" data-v-ddf0babc> Penetapan final presentasi (Oral / Poster). </p></div></div></div></section>',1)),t("section",z,[t("div",J,[t("div",G,[t("div",I,[t("div",Q,[t("div",W,[t("div",null,[a[9]||(a[9]=t("label",{class:"mb-0 mr-1 text-sm text-muted"},"Tampilkan",-1)),_(t("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),class:"form-control form-control-sm d-inline-block w-auto"},a[7]||(a[7]=[t("option",{value:10},"10",-1),t("option",{value:25},"25",-1),t("option",{value:50},"50",-1)]),512),[[h,b.value,void 0,{number:!0}]]),a[10]||(a[10]=t("span",{class:"text-sm text-muted ml-1 mr-3"},"Entri",-1)),_(t("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>f.value=e),class:"form-control form-control-sm d-inline-block w-auto",style:{"min-width":"160px"}},a[8]||(a[8]=[t("option",{value:""},"All Types",-1),t("option",{value:"RESEARCH"},"Research",-1),t("option",{value:"CASE"},"Case",-1)]),512),[[h,f.value]])])]),t("div",Z,[_(t("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>v.value=e),type:"text",class:"form-control form-control-sm",style:{"min-width":"240px"},placeholder:"Cari judul..."},null,512),[[D,v.value]]),t("button",{class:"btn btn-outline-secondary btn-sm",onClick:a[3]||(a[3]=e=>i(s.value.current_page||1)),disabled:u.value},[t("i",{class:m(["fas fa-sync-alt",{"fa-spin":u.value}])},null,2)],8,q)])])]),t("div",K,[t("table",X,[a[15]||(a[15]=t("thead",{class:"thead-light"},[t("tr",null,[t("th",{style:{width:"40px"}},"#"),t("th",null,"Nama"),t("th",null,"Judul"),t("th",{style:{width:"140px"}},"Tipe"),t("th",{style:{width:"160px"}},"Final Status"),t("th",{style:{width:"140px"},class:"text-center"},"Aksi")])],-1)),t("tbody",null,[u.value?(r(),d("tr",Y,a[11]||(a[11]=[t("td",{colspan:"5",class:"text-center"},"Memuat data...",-1)]))):y.value.length===0?(r(),d("tr",tt,a[12]||(a[12]=[t("td",{colspan:"5",class:"text-center text-muted"}," Belum ada paper final. ",-1)]))):w("",!0),(r(!0),d(P,null,L(y.value,(e,A)=>{var F;return r(),d("tr",{key:e.id},[t("td",null,n(A+1+(s.value.current_page-1)*s.value.per_page),1),t("td",null,[t("strong",null,n(e.participant.full_name),1)]),t("td",null,[t("strong",null,n(e.title),1),a[13]||(a[13]=t("br",null,null,-1))]),t("td",null,[t("span",{class:m(["badge text-uppercase",R(e)])},n((F=e.paper_type)==null?void 0:F.name),3)]),t("td",null,[t("span",{class:m(["badge",e.final_status==="oral_presentation"?"badge-success":"badge-info"])},n(j(e.final_status)),3)]),t("td",at,[t("button",{class:"btn btn-primary btn-sm",onClick:ht=>B(e)},a[14]||(a[14]=[t("i",{class:"fas fa-flag-checkered"},null,-1),S(" Final ")]),8,et)])])}),128))])])]),t("div",st,[t("div",lt,[t("div",nt," Menampilkan "+n(s.value.from||0)+" - "+n(s.value.to||0)+" dari "+n(s.value.total||0)+" data ",1),t("ul",ot,[t("li",{class:m(["page-item",{disabled:s.value.current_page===1}])},[t("a",{href:"#",class:"page-link",onClick:a[4]||(a[4]=C(e=>k(s.value.current_page-1),["prevent"]))},"«")],2),t("li",it,[t("span",dt," Halaman "+n(s.value.current_page)+" / "+n(s.value.last_page),1)]),t("li",{class:m(["page-item",{disabled:s.value.current_page===s.value.last_page}])},[t("a",{href:"#",class:"page-link",onClick:a[5]||(a[5]=C(e=>k(s.value.current_page+1),["prevent"]))},"»")],2)])])])])])]),t("div",rt,[t("div",ut,[t("div",pt,[a[20]||(a[20]=t("div",{class:"modal-header py-2"},[t("h5",{class:"modal-title"},"Final Presentation"),t("button",{type:"button",class:"close","data-dismiss":"modal"},[t("span",null,"×")])],-1)),p.value?(r(),d("div",ct,[t("h5",mt,n(p.value.title),1),t("div",vt,n(p.value.authors.map(e=>e.name).join(", ")),1),t("div",bt,[a[17]||(a[17]=t("label",{class:"fw-semibold"},"Final Presentation Status",-1)),_(t("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>c.value=e),class:"form-control form-control-sm"},a[16]||(a[16]=[t("option",{value:""},"-- Pilih --",-1),t("option",{value:"oral_presentation"},"Oral Presentation",-1),t("option",{value:"poster_presentation"},"Poster Presentation",-1)]),512),[[h,c.value]])])])):w("",!0),t("div",ft,[a[19]||(a[19]=t("button",{class:"btn btn-secondary btn-sm","data-dismiss":"modal"}," Batal ",-1)),t("button",{class:"btn btn-success btn-sm",disabled:g.value,onClick:E},[g.value?(r(),d("span",_t)):w("",!0),a[18]||(a[18]=S(" Simpan Final "))],8,gt)])])])])],64))}},Pt=H(yt,[["__scopeId","data-v-ddf0babc"]]);export{Pt as default};
