import{B as N,F as u,G as w,J as W,P as i,Q as d,R as t,ah as q,av as G,ap as J,W as _,a5 as x,aw as S,U as a,T as p,S as L,Z as f}from"./pinia-BDOwh8JO.js";import{u as K,b as A,e as E}from"./app-D-g1j7c6.js";import{S as H}from"./sweetalert2.esm.all-9Qm2jZ7z.js";const Q={class:"content"},Z={class:"container-fluid"},O={class:"card"},X={class:"card-header"},Y={class:"d-flex justify-content-between align-items-center w-100"},tt=["disabled"],et={class:"card-body table-responsive p-0"},st={class:"table table-bordered table-hover text-sm mb-0"},at={key:0},lt={key:1},nt=["onClick"],ot={class:"text-muted"},it={class:"text-muted"},dt={class:"text-muted"},rt={key:0,class:"text-xs text-muted"},ut={class:"card-footer clearfix py-2"},pt={class:"d-flex justify-content-between align-items-center"},mt={class:"text-muted text-sm"},ct={class:"pagination pagination-sm m-0"},vt={class:"page-item disabled"},bt={class:"page-link"},gt={class:"modal fade",id:"registrationDetailModal"},_t={class:"modal-dialog modal-md modal-dialog-centered modal-dialog-scrollable"},xt={class:"modal-content"},ft={class:"modal-header"},yt={class:"text-muted"},ht={key:0,class:"modal-body"},kt={class:"border rounded p-2 mb-3"},wt={class:"text-muted"},St={class:"border rounded p-2 mb-3"},Dt={class:"font-weight-bold"},Tt={class:"text-muted"},Pt={class:"border rounded p-2 mb-3"},Ct={class:"d-flex justify-content-between"},Bt={class:"d-flex justify-content-between"},Rt={class:"text-danger"},Mt={class:"d-flex justify-content-between font-weight-bold"},Ut={class:"text-danger"},jt={class:"border rounded p-2 mb-3",style:{"line-height":"normal"}},Nt={class:"font-weight-bold p-0 m-0"},$t={class:"text-muted"},qt={class:"mb-4"},Lt={class:"position-relative"},Vt={class:"d-flex justify-content-between text-xs position-relative"},zt={key:0},Ft={class:"table table-sm table-bordered mb-0"},It={style:{"font-size":"13px"}},Wt={class:"badge badge-info text-uppercase"},Ht={__name:"RegistrationList",setup(Gt){const V=K(),z=N(()=>V.eventData||null),m=N(()=>{var n;return((n=z.value)==null?void 0:n.id)||null}),y=u([]),o=u({}),c=u(""),v=u(10),b=u(!1),l=u(null),F=n=>{l.value=n,$("#registrationDetailModal").modal("show")},r=async(n=1)=>{if(m.value){b.value=!0;try{const e=await A.get("/api/v1/registrations",{params:{event_id:m.value,page:n,per_page:v.value,search:c.value}});y.value=e.data.data.data,o.value=e.data.data}catch{H.fire({icon:"error",title:"Gagal memuat data registrasi"})}finally{b.value=!1}}},D=n=>{const e=Number(n.total_amount||0),g=Number(n.unique_code||0);return e+g},I=n=>({choose_bank:"badge-secondary",waiting_transfer:"badge-warning",waiting_verification:"badge-info",paid:"badge-success"})[n]||"badge-light",T=n=>{if(!n.pricing_item)return"-";const e=n.pricing_item.workshop_count;return e===0?"Symposium":e===1?"Symposium + 1 Workshop":`Symposium + ${e} Workshop`},h=n=>Number(n).toLocaleString("id-ID");return w(c,E(()=>r(1),400)),w(v,()=>r(1)),w(m,()=>r(1)),W(()=>{m.value&&r()}),(n,e)=>{var g,P,C,B,R,M;return d(),i(x,null,[e[32]||(e[32]=t("section",{class:"content-header"},[t("div",{class:"container-fluid"},[t("h1",{class:"mb-1"},"Registrations"),t("p",{class:"mb-0 text-muted text-sm"}," Data pendaftaran & pembayaran peserta ")])],-1)),t("section",Q,[t("div",Z,[t("div",O,[t("div",X,[t("div",Y,[t("div",null,[e[7]||(e[7]=t("label",{class:"mb-0 mr-1 text-sm text-muted"},"Tampilkan",-1)),q(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),class:"form-control form-control-sm d-inline-block w-auto"},e[5]||(e[5]=[t("option",{value:10},"10",-1),t("option",{value:25},"25",-1),t("option",{value:50},"50",-1)]),512),[[G,v.value,void 0,{number:!0}]]),t("button",{class:"btn btn-outline-secondary btn-sm ml-2",onClick:e[1]||(e[1]=s=>r(o.value.current_page||1)),disabled:b.value},e[6]||(e[6]=[t("i",{class:"fas fa-sync-alt"},null,-1)]),8,tt)]),q(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>c.value=s),type:"text",class:"form-control form-control-sm w-auto",style:{"min-width":"260px"},placeholder:"Cari nama peserta / email..."},null,512),[[J,c.value]])])]),t("div",et,[t("table",st,[e[13]||(e[13]=t("thead",{class:"thead-light"},[t("tr",null,[t("th",{style:{width:"40px"}},"#"),t("th",null,"Peserta"),t("th",null,"Paket"),t("th",null,"Bank"),t("th",null,"Total"),t("th",{style:{width:"140px"}},"Payment Step"),t("th",{style:{width:"90px"}},"Status")])],-1)),t("tbody",null,[b.value?(d(),i("tr",at,e[8]||(e[8]=[t("td",{colspan:"7",class:"text-center"},"Memuat data...",-1)]))):y.value.length===0?(d(),i("tr",lt,e[9]||(e[9]=[t("td",{colspan:"7",class:"text-center text-muted"}," Belum ada registrasi. ",-1)]))):_("",!0),(d(!0),i(x,null,S(y.value,(s,k)=>{var U,j;return d(),i("tr",{key:s.id,style:{cursor:"pointer"},onClick:Jt=>F(s)},[t("td",null,a(k+1+(o.value.current_page-1)*o.value.per_page),1),t("td",null,[t("strong",null,a(s.participant.full_name),1),e[10]||(e[10]=t("br",null,null,-1)),t("small",ot,a(s.participant.email||"-"),1),e[11]||(e[11]=t("br",null,null,-1)),t("small",it,a((U=s.participant.participant_category)==null?void 0:U.name),1)]),t("td",null,[f(a(T(s)),1),e[12]||(e[12]=t("br",null,null,-1)),t("small",dt,a(s.pricing_item.bird_type.toUpperCase())+" Bird ",1)]),t("td",null,a(((j=s.bank)==null?void 0:j.name)||"-"),1),t("td",null,[f(" Rp "+a(h(D(s)))+" ",1),s.unique_code?(d(),i("div",rt," Kode unik: "+a(s.unique_code),1)):_("",!0)]),t("td",null,[t("span",{class:p(["badge",I(s.payment_step)])},a(s.payment_step),3)]),t("td",null,[t("span",{class:p(["badge",s.status==="paid"?"badge-success":s.status==="cancelled"?"badge-danger":"badge-warning"])},a(s.status),3)])],8,nt)}),128))])])]),t("div",ut,[t("div",pt,[t("div",mt," Menampilkan "+a(o.value.from||0)+" – "+a(o.value.to||0)+" dari "+a(o.value.total||0)+" data ",1),t("ul",ct,[t("li",{class:p(["page-item",{disabled:o.value.current_page===1}])},[t("a",{href:"#",class:"page-link",onClick:e[3]||(e[3]=L(s=>r(o.value.current_page-1),["prevent"]))},"«")],2),t("li",vt,[t("span",bt,a(o.value.current_page)+" / "+a(o.value.last_page),1)]),t("li",{class:p(["page-item",{disabled:o.value.current_page===o.value.last_page}])},[t("a",{href:"#",class:"page-link",onClick:e[4]||(e[4]=L(s=>r(o.value.current_page+1),["prevent"]))},"»")],2)])])])])])]),t("div",gt,[t("div",_t,[t("div",xt,[t("div",ft,[t("div",null,[e[14]||(e[14]=t("h5",{class:"mb-0"},"Registration Detail",-1)),t("small",yt,a((g=l.value)==null?void 0:g.participant.full_name),1)]),e[15]||(e[15]=t("button",{class:"close","data-dismiss":"modal"},"×",-1))]),l.value?(d(),i("div",ht,[t("div",kt,[e[16]||(e[16]=t("div",{class:"text-muted text-xs"},"Data Peserta",-1)),t("strong",null,a(l.value.participant.full_name),1),e[17]||(e[17]=t("br",null,null,-1)),t("small",wt,a(l.value.participant.email||"-")+" · "+a((P=l.value.participant.participant_category)==null?void 0:P.name),1)]),t("div",St,[e[18]||(e[18]=t("div",{class:"text-muted text-xs"},"Paket",-1)),t("div",Dt,a(T(l.value)),1),t("small",Tt,a(l.value.pricing_item.bird_type.toUpperCase())+" Bird ",1)]),t("div",Pt,[e[22]||(e[22]=t("div",{class:"text-muted text-xs mb-1"},"Pembayaran",-1)),t("div",Ct,[e[19]||(e[19]=t("span",null,"Harga Paket",-1)),t("span",null,"Rp "+a(h(l.value.total_amount)),1)]),t("div",Bt,[e[20]||(e[20]=t("span",null,"Kode Unik",-1)),t("span",Rt,a(l.value.unique_code||"-"),1)]),e[23]||(e[23]=t("hr",{class:"my-1"},null,-1)),t("div",Mt,[e[21]||(e[21]=t("span",null,"Total Transfer",-1)),t("span",Ut," Rp "+a(h(D(l.value))),1)])]),t("div",jt,[e[25]||(e[25]=t("div",{class:"text-muted text-xs"},"Bank Tujuan",-1)),e[26]||(e[26]=t("div",{class:"font-weight-bold p-0 m-0"},null,-1)),t("div",Nt,[f(a(((C=l.value.bank)==null?void 0:C.account_number)||"-")+" ",1),e[24]||(e[24]=t("br",null,null,-1)),f(" "+a(((B=l.value.bank)==null?void 0:B.name)||"-"),1)]),t("small",$t," a.n "+a(((R=l.value.bank)==null?void 0:R.account_name)||"-"),1)]),t("div",qt,[e[28]||(e[28]=t("div",{class:"text-muted text-xs mb-2"},"Timeline Pembayaran",-1)),t("div",Lt,[e[27]||(e[27]=t("div",{class:"position-absolute bg-light",style:{top:"5px",left:"0",right:"0",height:"2px"}},null,-1)),t("div",Vt,[(d(),i(x,null,S(["choose_bank","waiting_transfer","waiting_verification","paid"],s=>t("div",{key:s,class:"text-center flex-fill"},[t("div",{class:p(["mx-auto rounded-circle mb-1",s===l.value.payment_step?"bg-danger":"bg-secondary"]),style:{width:"12px",height:"12px"}},null,2),t("div",{class:p(s===l.value.payment_step?"text-danger font-weight-bold":"text-muted"),style:{"font-size":"11px"}},a(s.replace("_"," ")),3)])),64))])])]),(M=l.value.items)!=null&&M.length?(d(),i("div",zt,[e[30]||(e[30]=t("div",{class:"text-muted text-xs mb-2"},"Item Registrasi",-1)),t("table",Ft,[e[29]||(e[29]=t("thead",{class:"thead-light"},[t("tr",null,[t("th",{style:{width:"40px"}},"#"),t("th",null,"Judul"),t("th",{style:{width:"110px"}},"Tipe")])],-1)),t("tbody",null,[(d(!0),i(x,null,S(l.value.items,(s,k)=>(d(),i("tr",{key:s.id},[t("td",null,a(k+1),1),t("td",It,a(s.activity.title),1),t("td",null,[t("span",Wt,a(s.activity_type),1)])]))),128))])])])):_("",!0)])):_("",!0),e[31]||(e[31]=t("div",{class:"modal-footer py-2"},[t("button",{class:"btn btn-secondary btn-sm","data-dismiss":"modal"}," Tutup ")],-1))])])])],64)}}};export{Ht as default};
