import{F as u,G as B,J as C,P as d,Q as r,R as t,ah as i,av as v,a5 as _,aw as h,ap as f,W as M,U as o,T as g,S as y}from"./pinia-BDOwh8JO.js";import{b as x,e as U}from"./app-Cc4vFrcH.js";const L={class:"content"},T={class:"container-fluid"},E={class:"card"},N={class:"card-header"},j={class:"row g-2"},A={class:"col-md-2"},F={class:"col-md-2"},I={class:"col-md-2"},R=["value"],$={class:"col-md-2"},z={class:"col-md-2"},G={class:"col-md-2"},J={class:"card-body table-responsive p-0"},O={class:"table table-bordered table-hover text-sm mb-0"},Q={key:0},W={key:1},Y=["onClick"],q={class:"card-footer py-2"},H={class:"d-flex justify-content-between align-items-center"},K={class:"text-muted"},X={class:"pagination pagination-sm m-0"},Z={class:"page-item disabled"},tt={class:"page-link"},ot={__name:"PaymentList",setup(et){const m=u([]),l=u({}),p=u(!1),b=u([]),s=u({status:"",payment_method:"",bank_id:"",date_from:"",date_to:"",search:""}),c=async(n=1)=>{p.value=!0;const e=await x.get("/api/v1/payments",{params:{...s.value,page:n}});m.value=e.data.data.data,l.value=e.data.data,p.value=!1},D=async()=>{const n=await x.get("/api/v1/banks");b.value=n.data.data.data},w=n=>{console.log("OPEN PAYMENT DETAIL",n)},S=n=>Number(n).toLocaleString("id-ID"),P=n=>new Date(n).toLocaleDateString("id-ID");return B(s,U(()=>c(1),500),{deep:!0}),C(()=>{D(),c()}),(n,e)=>(r(),d(_,null,[e[15]||(e[15]=t("section",{class:"content-header"},[t("div",{class:"container-fluid"},[t("h1",{class:"mb-1"},"Payments"),t("p",{class:"mb-0 text-muted text-sm"}," Daftar pembayaran masuk dari peserta ")])],-1)),t("section",L,[t("div",T,[t("div",E,[t("div",N,[t("div",j,[t("div",A,[i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.status=a),class:"form-control form-control-sm"},e[8]||(e[8]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"verified"},"Verified",-1),t("option",{value:"rejected"},"Rejected",-1)]),512),[[v,s.value.status]])]),t("div",F,[i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.payment_method=a),class:"form-control form-control-sm"},e[9]||(e[9]=[t("option",{value:""},"Semua Metode",-1),t("option",{value:"bank_transfer"},"Bank Transfer",-1)]),512),[[v,s.value.payment_method]])]),t("div",I,[i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.bank_id=a),class:"form-control form-control-sm"},[e[10]||(e[10]=t("option",{value:""},"Semua Bank",-1)),(r(!0),d(_,null,h(b.value,a=>(r(),d("option",{key:a.id,value:a.id},o(a.name),9,R))),128))],512),[[v,s.value.bank_id]])]),t("div",$,[i(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=a=>s.value.date_from=a),class:"form-control form-control-sm"},null,512),[[f,s.value.date_from]])]),t("div",z,[i(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=a=>s.value.date_to=a),class:"form-control form-control-sm"},null,512),[[f,s.value.date_to]])]),t("div",G,[i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.search=a),class:"form-control form-control-sm",placeholder:"Cari peserta / email"},null,512),[[f,s.value.search]])])])]),t("div",J,[t("table",O,[e[14]||(e[14]=t("thead",{class:"thead-light"},[t("tr",null,[t("th",null,"#"),t("th",null,"Peserta"),t("th",null,"Email"),t("th",null,"Bank"),t("th",null,"Amount"),t("th",null,"Status"),t("th",null,"Paid At")])],-1)),t("tbody",null,[p.value?(r(),d("tr",Q,e[11]||(e[11]=[t("td",{colspan:"7",class:"text-center"},"Memuat data...",-1)]))):m.value.length===0?(r(),d("tr",W,e[12]||(e[12]=[t("td",{colspan:"7",class:"text-center text-muted"}," Tidak ada pembayaran ",-1)]))):M("",!0),(r(!0),d(_,null,h(m.value,(a,V)=>{var k;return r(),d("tr",{key:a.id,style:{cursor:"pointer"},onClick:at=>w(a)},[t("td",null,o(V+1+(l.value.current_page-1)*l.value.per_page),1),t("td",null,[t("strong",null,o(a.registration.participant.full_name),1),e[13]||(e[13]=t("br",null,null,-1))]),t("td",null,o(a.registration.participant.email),1),t("td",null,o(((k=a.registration.bank)==null?void 0:k.name)||"-"),1),t("td",null," Rp "+o(S(a.amount)),1),t("td",null,[t("span",{class:g(["badge",a.status==="verified"?"badge-success":a.status==="rejected"?"badge-danger":"badge-warning"])},o(a.status),3)]),t("td",null,o(a.paid_at?P(a.paid_at):"-"),1)],8,Y)}),128))])])]),t("div",q,[t("div",H,[t("small",K,o(l.value.from||0)+" – "+o(l.value.to||0)+" dari "+o(l.value.total||0),1),t("ul",X,[t("li",{class:g(["page-item",{disabled:l.value.current_page===1}])},[t("a",{href:"#",class:"page-link",onClick:e[6]||(e[6]=y(a=>c(l.value.current_page-1),["prevent"]))},"«")],2),t("li",Z,[t("span",tt,o(l.value.current_page)+" / "+o(l.value.last_page),1)]),t("li",{class:g(["page-item",{disabled:l.value.current_page===l.value.last_page}])},[t("a",{href:"#",class:"page-link",onClick:e[7]||(e[7]=y(a=>c(l.value.current_page+1),["prevent"]))},"»")],2)])])])])])])],64))}};export{ot as default};
