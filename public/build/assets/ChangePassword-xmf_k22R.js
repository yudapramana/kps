import{F as d,A as x,P as n,Q as l,R as s,W as f,x as k,S as U,ah as v,at as w,T as _,U as y,Z as K,a5 as B}from"./pinia-BDOwh8JO.js";import{u as V}from"./toastr-Ct0VgbgP.js";import{_ as D,u as M,d as N,a as F,b as I}from"./app-D-g1j7c6.js";const T={class:"content-header"},$={class:"container-fluid"},A={class:"row mb-2"},R={key:0,class:"col-sm-6"},j={class:"content"},z={class:"container-fluid"},E={class:"row justify-content-center"},H={class:"col-md-6"},Q={class:"card shadow-sm rounded"},W={class:"card-body"},Z={class:"form-group mb-3"},q={class:"input-group"},G=["type"],J={key:0,class:"text-danger text-sm"},L={class:"form-group mb-3"},O={class:"input-group"},X=["type"],Y={key:0,class:"text-danger text-sm"},ss={class:"form-group mb-3"},as={class:"input-group"},es=["type"],os={class:"text-end"},ts=["disabled"],rs={key:0,class:"fa fa-spinner fa-spin me-1"},ns={key:1,class:"fa fa-save me-1"},ls={__name:"ChangePassword",setup(ds){const m=M(),g=N(),P=V(),i=d(!1),t=d({}),S=F(),e=x({currentPassword:m.user.username,password:"",passwordConfirmation:""}),u=d(!1),c=d(!1),p=d(!1),C=async()=>{i.value=!0,t.value={};try{const r=await I.post("/api/change-user-password",e);P.success(r.data.message);for(const a in e)e[a]="";m.user.must_change_password=!1,console.log("authUserStore.user.must_change_password"),console.log(m.user.must_change_password),S.push("/user/dashboard")}catch(r){r.response&&r.response.status===422&&(t.value=r.response.data.errors)}finally{i.value=!1}};return(r,a)=>{var b,h;return l(),n(B,null,[s("div",T,[s("div",$,[s("div",A,[a[7]||(a[7]=s("div",{class:"col-sm-6"},[s("h1",{class:"m-0"},"Ubah Password")],-1)),k(g).isMobile?f("",!0):(l(),n("div",R,a[6]||(a[6]=[s("ol",{class:"breadcrumb float-sm-right"},[s("li",{class:"breadcrumb-item"},[s("a",{href:"#"},"Home")]),s("li",{class:"breadcrumb-item active"},"Ubah Password")],-1)])))])])]),s("div",j,[s("div",z,[s("div",E,[s("div",H,[s("div",Q,[a[12]||(a[12]=s("div",{class:"card-header bg-primary text-white"},[s("h4",{class:"mb-0"},"Ubah Password")],-1)),s("div",W,[s("form",{onSubmit:U(C,["prevent"])},[s("div",Z,[a[8]||(a[8]=s("label",{for:"currentPassword"},"Kata Sandi Saat Ini",-1)),s("div",q,[v(s("input",{type:u.value?"text":"password","onUpdate:modelValue":a[0]||(a[0]=o=>e.currentPassword=o),id:"currentPassword",class:"form-control",placeholder:"Masukkan Kata Sandi Saat Ini"},null,8,G),[[w,e.currentPassword]]),s("button",{class:"btn btn-outline-secondary",type:"button",onClick:a[1]||(a[1]=o=>u.value=!u.value)},[s("i",{class:_(u.value?"fa fa-eye-slash":"fa fa-eye")},null,2)])]),(b=t.value)!=null&&b.current_password?(l(),n("span",J,y(t.value.current_password[0]),1)):f("",!0)]),s("div",L,[a[9]||(a[9]=s("label",{for:"newPassword"},"Kata Sandi Baru",-1)),s("div",O,[v(s("input",{type:c.value?"text":"password","onUpdate:modelValue":a[2]||(a[2]=o=>e.password=o),id:"newPassword",class:"form-control",placeholder:"Kata Sandi Baru"},null,8,X),[[w,e.password]]),s("button",{class:"btn btn-outline-secondary",type:"button",onClick:a[3]||(a[3]=o=>c.value=!c.value)},[s("i",{class:_(c.value?"fa fa-eye-slash":"fa fa-eye")},null,2)])]),(h=t.value)!=null&&h.password?(l(),n("span",Y,y(t.value.password[0]),1)):f("",!0)]),s("div",ss,[a[10]||(a[10]=s("label",{for:"passwordConfirmation"},"Konfirmasi Kata Sandi Baru",-1)),s("div",as,[v(s("input",{type:p.value?"text":"password","onUpdate:modelValue":a[4]||(a[4]=o=>e.passwordConfirmation=o),id:"passwordConfirmation",class:"form-control",placeholder:"Konfirmasi Kata Sandi Baru"},null,8,es),[[w,e.passwordConfirmation]]),s("button",{class:"btn btn-outline-secondary",type:"button",onClick:a[5]||(a[5]=o=>p.value=!p.value)},[s("i",{class:_(p.value?"fa fa-eye-slash":"fa fa-eye")},null,2)])])]),s("div",os,[s("button",{type:"submit",class:"btn btn-success",disabled:i.value},[i.value?(l(),n("i",rs)):(l(),n("i",ns)),a[11]||(a[11]=K(" Save Changes "))],8,ts)])],32)])])])])])])],64)}}},ps=D(ls,[["__scopeId","data-v-53763778"]]);export{ps as default};
