import{A as g,V as w,B as i,C as r,ax as b,D as e,F as N,S as m,I as d,as as S,J as p,aB as D,aA as U,K as f,U as B,a as M}from"./AuthUserStore-67h2FHdL.js";import{u as F}from"./toastr-Bo3tjpk-.js";import{b as A}from"./app-CZBZEz52.js";const C={class:"content"},O={class:"container-fluid"},P={class:"row"},T={class:"col-md-6"},h={class:"card card-primary"},E={class:"card-body"},G={class:"form-group"},j={key:0,class:"text-danger text-sm"},I={class:"form-group"},J={key:0,class:"text-danger text-sm"},K={class:"form-group"},L={key:0,class:"text-danger text-sm"},q={class:"form-group"},z={class:"custom-control custom-switch"},H={key:0,class:"text-danger text-sm"},Q={class:"form-group"},R={key:0,class:"text-danger text-sm"},tt={__name:"UpdateSetting",setup(W){const v=F(),Y=A(),a=g({app_name:"",date_format:"YYYY-MM-DD",pagination_limit:10,maintenance:!1,environment:"development"}),c=g({}),n=g(null),k=async()=>{try{const{data:l}=await M.get("/api/settings");a.value={...l,maintenance:["1",1,!0,"true","on"].includes(l.maintenance)},c.value={...a.value},Y.applySettings(a.value)}catch{v.error("Gagal memuat pengaturan aplikasi.")}},V=async()=>{var u;n.value=null;const l=c.value.maintenance===!0,t=a.value.maintenance===!0;if(!(!l&&t&&!confirm(`Turn ON maintenance mode?

Semua user akan otomatis logout.`)))try{const s={...a.value,maintenance:a.value.maintenance?"1":"0"};await M.post("/api/settings",s),v.success("Pengaturan berhasil diperbarui"),c.value={...a.value},Y.applySettings(a.value),!l&&t&&location.reload()}catch(s){((u=s.response)==null?void 0:u.status)===422?n.value=s.response.data.errors:v.error("Gagal menyimpan pengaturan.")}};return w(k),(l,t)=>{var u,s,x,y,_;return r(),i(B,null,[t[16]||(t[16]=b('<div class="content-header"><div class="container-fluid"><div class="row mb-2"><div class="col-sm-6"><h1 class="m-0">Settings</h1></div></div></div></div>',1)),e("div",C,[e("div",O,[e("div",P,[e("div",T,[e("div",h,[t[15]||(t[15]=e("div",{class:"card-header"},[e("h3",{class:"card-title"},"General Setting")],-1)),e("form",{onSubmit:N(V,["prevent"])},[e("div",E,[e("div",G,[t[5]||(t[5]=e("label",null,"App Display Name",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.app_name=o),type:"text",class:"form-control",placeholder:"Enter app display name"},null,512),[[S,a.value.app_name]]),(u=n.value)!=null&&u.app_name?(r(),i("span",j,p(n.value.app_name[0]),1)):d("",!0)]),e("div",I,[t[7]||(t[7]=e("label",null,"Date Format",-1)),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.date_format=o),class:"form-control"},t[6]||(t[6]=[b('<option value="m/d/Y">MM/DD/YYYY</option><option value="d/m/Y">DD/MM/YYYY</option><option value="Y-m-d">YYYY-MM-DD</option><option value="F j, Y">Month DD, YYYY</option><option value="j F Y">DD Month YYYY</option>',5)]),512),[[D,a.value.date_format]]),(s=n.value)!=null&&s.date_format?(r(),i("span",J,p(n.value.date_format[0]),1)):d("",!0)]),e("div",K,[t[8]||(t[8]=e("label",null,"Pagination Limit",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.pagination_limit=o),type:"number",min:"1",class:"form-control"},null,512),[[S,a.value.pagination_limit,void 0,{number:!0}]]),(x=n.value)!=null&&x.pagination_limit?(r(),i("span",L,p(n.value.pagination_limit[0]),1)):d("",!0)]),e("div",q,[e("div",z,[m(e("input",{type:"checkbox",class:"custom-control-input",id:"maintenanceSwitch","onUpdate:modelValue":t[3]||(t[3]=o=>a.value.maintenance=o)},null,512),[[U,a.value.maintenance]]),t[9]||(t[9]=e("label",{class:"custom-control-label",for:"maintenanceSwitch"}," Maintenance Mode ",-1))]),t[10]||(t[10]=e("small",{class:"form-text text-muted"}," Saat ON, semua user akan otomatis logout. ",-1)),(y=n.value)!=null&&y.maintenance?(r(),i("span",H,p(n.value.maintenance[0]),1)):d("",!0)]),e("div",Q,[t[12]||(t[12]=e("label",null,"Application Environment",-1)),m(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.environment=o),class:"form-control"},t[11]||(t[11]=[e("option",{value:"development"},"Development",-1),e("option",{value:"production"},"Production",-1)]),512),[[D,a.value.environment]]),t[13]||(t[13]=e("small",{class:"form-text text-muted"},[f(" Development: debug aktif."),e("br"),f(" Production: mode aman. ")],-1)),(_=n.value)!=null&&_.environment?(r(),i("span",R,p(n.value.environment[0]),1)):d("",!0)])]),t[14]||(t[14]=e("div",{class:"card-footer"},[e("button",{type:"submit",class:"btn btn-primary"},[e("i",{class:"fa fa-save mr-1"}),f(" Save Changes ")])],-1))],32)])])])])])],64)}}};export{tt as default};
