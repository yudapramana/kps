import{B as S,F as i,G as C,J as F,P as c,Q as m,R as t,ah as p,av as T,ap as M,W as G,a5 as U,aw as L,U as l,T as V,S as R,Z as q}from"./pinia-BDOwh8JO.js";import{u as A,b as h,e as H}from"./app-D-g1j7c6.js";import{S as v}from"./sweetalert2.esm.all-9Qm2jZ7z.js";const I={class:"content-header"},J={class:"container-fluid"},W={class:"d-flex justify-content-between align-items-center"},z=["disabled"],Q={class:"content"},Y={class:"container-fluid"},Z={class:"card"},O={class:"card-header"},X={class:"d-flex justify-content-between align-items-center w-100"},tt={class:"card-body table-responsive p-0"},at={class:"table table-bordered table-hover text-sm mb-0"},et={key:0},st={key:1},nt={class:"badge badge-info text-uppercase"},ot={class:"text-center"},lt={class:"text-center"},it={class:"btn-group btn-group-sm"},rt=["onClick"],ut=["onClick"],dt={class:"card-footer clearfix py-2"},ct={class:"d-flex justify-content-between align-items-center"},mt={class:"text-muted text-sm"},pt={class:"pagination pagination-sm m-0"},vt={class:"page-item disabled"},gt={class:"page-link"},ft={class:"modal fade",id:"roomModal"},bt={class:"modal-dialog"},ht={class:"modal-content"},_t={class:"modal-header py-2"},yt={class:"modal-title"},xt={class:"modal-body"},wt={class:"form-group"},kt={class:"form-group"},Ct={class:"form-group"},Mt={class:"text-right"},Rt=["disabled"],Ut={__name:"RoomList",setup(Bt){const _=v.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),j=A(),D=S(()=>j.eventData||null),u=S(()=>{var s;return((s=D.value)==null?void 0:s.id)||null}),y=i([]),n=i({}),g=i(""),f=i(10),x=i(!1),b=i(!1),w=i(!1),o=i({id:null,name:"",category:"",capacity:null}),r=async(s=1)=>{if(u.value){x.value=!0;try{const a=await h.get("/api/v1/rooms",{params:{page:s,per_page:f.value,search:g.value,event_id:u.value}});y.value=a.data.data.data,n.value=a.data.data}catch{v.fire({icon:"error",title:"Gagal memuat data ruangan"})}finally{x.value=!1}}},E=()=>{b.value=!1,o.value={id:null,name:"",category:"",capacity:null},$("#roomModal").modal("show")},K=s=>{b.value=!0,o.value={...s},$("#roomModal").modal("show")},N=async()=>{var a,e;w.value=!0;const s={...o.value,event_id:u.value};try{b.value?(await h.put(`/api/v1/rooms/${o.value.id}`,s),_.fire({icon:"success",title:"Ruangan berhasil diperbarui"})):(await h.post("/api/v1/rooms",s),_.fire({icon:"success",title:"Ruangan berhasil ditambahkan"})),$("#roomModal").modal("hide"),r(n.value.current_page)}catch(d){v.fire({icon:"error",title:"Gagal menyimpan ruangan",text:((e=(a=d.response)==null?void 0:a.data)==null?void 0:e.message)||"Terjadi kesalahan sistem"})}finally{w.value=!1}},P=async s=>{var e,d;if((await v.fire({title:"Hapus ruangan?",text:`Ruangan "${s.name}" akan dihapus`,icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus",cancelButtonText:"Batal"})).isConfirmed)try{await h.delete(`/api/v1/rooms/${s.id}`),_.fire({icon:"success",title:"Ruangan berhasil dihapus"}),r(n.value.current_page)}catch(k){v.fire({icon:"error",title:"Gagal menghapus ruangan",text:((d=(e=k.response)==null?void 0:e.data)==null?void 0:d.message)||"Terjadi kesalahan sistem"})}},B=s=>{s<1||s>n.value.last_page||r(s)};return C(g,H(()=>r(1),400)),C(f,()=>r(1)),C(u,()=>r(1)),F(()=>{u.value&&r()}),(s,a)=>(m(),c(U,null,[t("section",I,[t("div",J,[t("div",W,[a[7]||(a[7]=t("div",null,[t("h1",{class:"mb-1"}," Rooms "),t("p",{class:"mb-0 text-muted text-sm"}," Manajemen ruangan untuk symposium, workshop, dan lainnya. ")],-1)),t("button",{class:"btn btn-primary btn-sm",disabled:!u.value,onClick:E}," + Tambah Ruangan ",8,z)])])]),t("section",Q,[t("div",Y,[t("div",Z,[t("div",O,[t("div",X,[t("div",null,[a[9]||(a[9]=t("label",{class:"mb-0 mr-1 text-sm text-muted"},"Tampilkan",-1)),p(t("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),class:"form-control form-control-sm d-inline-block w-auto"},a[8]||(a[8]=[t("option",{value:10},"10",-1),t("option",{value:25},"25",-1),t("option",{value:50},"50",-1)]),512),[[T,f.value,void 0,{number:!0}]]),a[10]||(a[10]=t("span",{class:"text-sm text-muted ml-1"},"Entri",-1))]),p(t("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),type:"text",class:"form-control form-control-sm w-auto",style:{"min-width":"220px"},placeholder:"Cari nama ruangan..."},null,512),[[M,g.value]])])]),t("div",tt,[t("table",at,[a[15]||(a[15]=t("thead",{class:"thead-light"},[t("tr",null,[t("th",{style:{width:"40px"}},"#"),t("th",null,"Nama Ruangan"),t("th",{style:{width:"140px"}},"Kategori"),t("th",{style:{width:"120px"},class:"text-center"},"Kapasitas"),t("th",{style:{width:"110px"},class:"text-center"},"Aksi")])],-1)),t("tbody",null,[x.value?(m(),c("tr",et,a[11]||(a[11]=[t("td",{colspan:"5",class:"text-center"},"Memuat data...",-1)]))):y.value.length===0?(m(),c("tr",st,a[12]||(a[12]=[t("td",{colspan:"5",class:"text-center text-muted"}," Belum ada ruangan. ",-1)]))):G("",!0),(m(!0),c(U,null,L(y.value,(e,d)=>(m(),c("tr",{key:e.id},[t("td",null,l(d+1+(n.value.current_page-1)*n.value.per_page),1),t("td",null,[t("strong",null,l(e.name),1)]),t("td",null,[t("span",nt,l(e.category),1)]),t("td",ot,l(e.capacity??"-"),1),t("td",lt,[t("div",it,[t("button",{class:"btn btn-warning",onClick:k=>K(e)},a[13]||(a[13]=[t("i",{class:"fas fa-edit"},null,-1)]),8,rt),t("button",{class:"btn btn-danger",onClick:k=>P(e)},a[14]||(a[14]=[t("i",{class:"fas fa-trash"},null,-1)]),8,ut)])])]))),128))])])]),t("div",dt,[t("div",ct,[t("div",mt," Menampilkan "+l(n.value.from||0)+" - "+l(n.value.to||0)+" dari "+l(n.value.total||0)+" data ",1),t("ul",pt,[t("li",{class:V(["page-item",{disabled:n.value.current_page===1}])},[t("a",{href:"#",class:"page-link",onClick:a[2]||(a[2]=R(e=>B(n.value.current_page-1),["prevent"]))},"«")],2),t("li",vt,[t("span",gt," Halaman "+l(n.value.current_page)+" / "+l(n.value.last_page),1)]),t("li",{class:V(["page-item",{disabled:n.value.current_page===n.value.last_page}])},[t("a",{href:"#",class:"page-link",onClick:a[3]||(a[3]=R(e=>B(n.value.current_page+1),["prevent"]))},"»")],2)])])])])]),t("div",ft,[t("div",bt,[t("div",ht,[t("div",_t,[t("h5",yt,l(b.value?"Edit Ruangan":"Tambah Ruangan"),1),a[16]||(a[16]=t("button",{type:"button",class:"close","data-dismiss":"modal"},[t("span",null,"×")],-1))]),t("div",xt,[t("form",{onSubmit:R(N,["prevent"])},[t("div",wt,[a[17]||(a[17]=t("label",null,"Nama Ruangan",-1)),p(t("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>o.value.name=e),class:"form-control form-control-sm",required:""},null,512),[[M,o.value.name]])]),t("div",kt,[a[19]||(a[19]=t("label",null,"Kategori",-1)),p(t("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>o.value.category=e),class:"form-control form-control-sm",required:""},a[18]||(a[18]=[t("option",{value:""},"-- Pilih Kategori --",-1),t("option",{value:"symposium"},"Symposium",-1),t("option",{value:"workshop"},"Workshop",-1),t("option",{value:"jeopardy"},"Jeopardy",-1)]),512),[[T,o.value.category]])]),t("div",Ct,[a[20]||(a[20]=t("label",null,"Kapasitas",-1)),p(t("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>o.value.capacity=e),type:"number",min:"0",class:"form-control form-control-sm"},null,512),[[M,o.value.capacity,void 0,{number:!0}]])]),t("div",Mt,[t("button",{class:"btn btn-primary btn-sm",disabled:w.value},a[21]||(a[21]=[t("i",{class:"fas fa-save mr-1"},null,-1),q(" Simpan ")]),8,Rt)])],32)])])])])])],64))}};export{Ut as default};
