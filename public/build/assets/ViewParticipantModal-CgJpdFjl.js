import{l as y,k as x}from"./EventParticipantHelpers-CO5Top6O.js";import{y as z,B as l,C as d,D as t,I as u,K as c,J as s,G as m,H as o,U as Q,ay as X}from"./AuthUserStore-67h2FHdL.js";const Y={class:"modal fade",id:"viewParticipantModal",tabindex:"-1",role:"dialog"},Z={class:"modal-dialog modal-lg",role:"document"},tt={class:"modal-content"},et={key:0,class:"modal-body"},st={class:"row"},at={class:"col-md-8 mb-3"},it={class:"card shadow-sm border"},nt={class:"card-body p-0"},lt={class:"table table-sm mb-0"},dt={class:"text-uppercase font-weight-bold"},ot={class:"text-monospace"},rt={class:"text-uppercase"},ct={class:"text-danger font-weight-bold mr-2"},ut={key:0},bt={class:"text-uppercase"},gt={class:"text-uppercase"},pt={class:"text-uppercase"},mt={class:"text-uppercase"},ft={class:"text-uppercase"},_t={class:"text-uppercase"},ht={class:"text-uppercase"},kt={class:"text-uppercase"},yt={class:"text-uppercase"},xt={class:"text-danger font-weight-bold"},Pt={class:"text-danger font-weight-bold"},vt={key:0,class:"p-3 border-top"},wt={class:"alert alert-danger mb-0"},Kt={class:"text-sm"},Tt={class:"col-md-4"},At={class:"card shadow-sm border mb-3"},Bt={class:"card-body p-0"},Ct={key:0,class:"mx-auto rounded-circle overflow-hidden border",style:{width:"180px",height:"180px"}},jt=["src"],Dt={key:1,class:"mx-auto text-muted",style:{"align-items":"center","text-align":"center"}},Lt={class:"list-group list-group-flush"},Vt={class:"list-group-item d-flex justify-content-between align-items-center"},Nt={class:"list-group-item d-flex justify-content-between align-items-center"},It={class:"list-group-item d-flex justify-content-between align-items-center"},Et={class:"list-group-item d-flex justify-content-between align-items-center"},Rt={class:"list-group-item d-flex justify-content-between align-items-center"},Ft={class:"list-group-item d-flex justify-content-between align-items-center"},$t={class:"card shadow-sm border"},St={class:"card-body p-0"},Jt={class:"table table-sm mb-0 mx-auto text-center"},Mt={class:"text-right text-danger font-weight-bold"},Ut={class:"text-right text-danger font-weight-bold"},Ht={key:0,class:"card shadow-sm border mt-3"},Ot={class:"card-header border-0 py-2 d-flex justify-content-between align-items-center"},zt={key:0,class:"badge badge-light border"},Gt={class:"card-body p-2"},Wt={key:0,class:"text-muted text-sm text-center py-2"},qt={key:1,class:"text-muted text-sm text-center py-2"},Qt={key:2},Xt={class:"d-flex justify-content-between align-items-start"},Yt={class:"font-weight-bold"},Zt={class:"text-muted text-xs ml-2"},te={class:"text-xs text-muted mt-1"},ee={class:"text-xs text-muted"},se={class:"text-right"},ae={class:"font-weight-bold"},ie={class:"mt-2 d-flex flex-wrap"},ne={class:"mt-1 d-flex flex-wrap"},le={key:0,class:"badge badge-info mr-1 mb-1"},de={key:1,class:"badge badge-info mr-1 mb-1"},oe={key:2,class:"badge badge-info mr-1 mb-1"},re={key:3,class:"badge badge-info mr-1 mb-1"},ce={key:4,class:"badge badge-info mr-1 mb-1"},ue={key:5,class:"badge badge-info mr-1 mb-1"},be={key:0,class:"mt-2 text-sm"},ge={class:"border rounded p-2 bg-light"},pe={key:1,class:"mt-2"},me={class:"mb-0 mt-2 p-2 bg-dark text-light rounded text-xs"},he={__name:"ViewParticipantModal",props:{selectedParticipant:{type:Object,default:null}},setup(a){const f=a,r=n=>{var e;return(e=f.selectedParticipant)!=null&&e.participant?!!f.selectedParticipant.participant[n]:!1},g=n=>{var b,p;const e=(p=(b=f.selectedParticipant)==null?void 0:b.participant)==null?void 0:p[n];e&&window.open(e,"_blank")},_=z(()=>{const n=f.selectedParticipant;if(!n)return[];const e=n.latestVerification||n.latest_verification||n.latest_verification_data||null,b=n.verifications||n.participant_verifications||n.verification_logs||null;return Array.isArray(b)&&b.length?b:e?[e]:[]}),P=z(()=>{const n=f.selectedParticipant;return n?"verifications"in n||"latestVerification"in n||"latest_verification"in n||"participant_verifications"in n:!1}),G=n=>n==="verified"?"badge-success":n==="rejected"?"badge-danger":"badge-secondary",v=n=>{if(!n)return{checked:0,total:0};const e=["checked_photo","checked_id_card","checked_family_card","checked_bank_book","checked_certificate","checked_other","checked_identity","checked_contact","checked_domicile","checked_education","checked_bank_account","checked_document_dates"],b=e.length;return{checked:e.reduce((h,k)=>h+(n[k]?1:0),0),total:b}},W=n=>{try{return n?JSON.stringify(n,null,2):""}catch{return""}};return(n,e)=>{var b,p,h,k,w,K,T,A,B,C,j,D,L,V,N,I,E,R,F,$,S,J,M,U,H;return d(),l("div",Y,[t("div",Z,[t("div",tt,[e[43]||(e[43]=t("div",{class:"modal-header py-2"},[t("h5",{class:"modal-title"},[t("i",{class:"fas fa-id-card-alt mr-2"}),c(" Detail Peserta ")]),t("button",{type:"button",class:"close","data-dismiss":"modal"},[t("span",null,"Ã—")])],-1)),a.selectedParticipant?(d(),l("div",et,[t("div",st,[t("div",at,[t("div",it,[e[24]||(e[24]=t("div",{class:"card-header border-0 d-flex justify-content-between align-items-center py-2"},[t("span",{class:"font-weight-bold"},"Biodata Peserta")],-1)),t("div",nt,[t("table",lt,[t("tbody",null,[t("tr",null,[e[6]||(e[6]=t("th",{style:{width:"35%"}},"Nama",-1)),t("td",dt,s((b=a.selectedParticipant.participant)==null?void 0:b.full_name),1)]),t("tr",null,[e[7]||(e[7]=t("th",null,"NIK",-1)),t("td",ot,s((p=a.selectedParticipant.participant)==null?void 0:p.nik),1)]),t("tr",null,[e[8]||(e[8]=t("th",null,"Tempat Lahir",-1)),t("td",rt,s(((h=a.selectedParticipant.participant)==null?void 0:h.place_of_birth)||"-"),1)]),t("tr",null,[e[9]||(e[9]=t("th",null,"Tanggal Lahir",-1)),t("td",null,[t("span",ct,s(m(y)((k=a.selectedParticipant.participant)==null?void 0:k.date_of_birth)),1),a.selectedParticipant.age_year!=null?(d(),l("span",ut," ("+s(a.selectedParticipant.age_year)+"T "+s(a.selectedParticipant.age_month)+"B "+s(a.selectedParticipant.age_day)+"H) ",1)):u("",!0)])]),t("tr",null,[e[10]||(e[10]=t("th",null,"Telepon",-1)),t("td",null,s(((w=a.selectedParticipant.participant)==null?void 0:w.phone_number)||"-"),1)]),t("tr",null,[e[11]||(e[11]=t("th",null,"Jenis Kelamin",-1)),t("td",bt,s(((K=a.selectedParticipant.participant)==null?void 0:K.gender)==="MALE"||((T=a.selectedParticipant.participant)==null?void 0:T.gender)==="L"?"LAKI-LAKI":"PEREMPUAN"),1)]),t("tr",null,[e[12]||(e[12]=t("th",null,"Cabang Lomba",-1)),t("td",gt,s(((A=a.selectedParticipant.event_group)==null?void 0:A.full_name)||((B=a.selectedParticipant.event_branch)==null?void 0:B.full_name)||"-"),1)]),t("tr",null,[e[13]||(e[13]=t("th",null,"Kategori",-1)),t("td",pt,s([(C=a.selectedParticipant.event_category)==null?void 0:C.category_name].filter(Boolean).join(" / ")||"-"),1)]),t("tr",null,[e[14]||(e[14]=t("th",null,"Asal / Kontingen",-1)),t("td",mt,s(a.selectedParticipant.contingent||((j=a.selectedParticipant.participant)==null?void 0:j.district_name)||((D=a.selectedParticipant.participant)==null?void 0:D.regency_name)||((L=a.selectedParticipant.participant)==null?void 0:L.province_name)||"-"),1)]),t("tr",null,[e[15]||(e[15]=t("th",null,"Alamat",-1)),t("td",ft,s(((V=a.selectedParticipant.participant)==null?void 0:V.address)||"-"),1)]),t("tr",null,[e[16]||(e[16]=t("th",null,"Pendidikan",-1)),t("td",_t,s(((N=a.selectedParticipant.participant)==null?void 0:N.education)||"-"),1)]),t("tr",null,[e[17]||(e[17]=t("th",null,"Nomor Rekening",-1)),t("td",ht,s(((I=a.selectedParticipant.participant)==null?void 0:I.bank_account_number)||"-"),1)]),t("tr",null,[e[18]||(e[18]=t("th",null,"Akun Rekening",-1)),t("td",kt,s(((E=a.selectedParticipant.participant)==null?void 0:E.bank_account_name)||"-"),1)]),t("tr",null,[e[19]||(e[19]=t("th",null,"Bank Rekening",-1)),t("td",yt,s(((R=a.selectedParticipant.participant)==null?void 0:R.bank_name)||"-"),1)]),e[22]||(e[22]=t("tr",null,[t("th",null,"Kategori Peserta"),t("td",{class:"text-uppercase"}," PESERTA INTI ")],-1)),t("tr",null,[e[20]||(e[20]=t("th",null,"Terbit KTP",-1)),t("td",xt,s(m(y)((F=a.selectedParticipant.participant)==null?void 0:F.tanggal_terbit_ktp)),1)]),t("tr",null,[e[21]||(e[21]=t("th",null,"Terbit KK",-1)),t("td",Pt,s(m(y)(($=a.selectedParticipant.participant)==null?void 0:$.tanggal_terbit_kk)),1)])])]),((S=a.selectedParticipant)==null?void 0:S.reregistration_status)==="rejected"?(d(),l("div",vt,[t("div",wt,[e[23]||(e[23]=t("div",{class:"font-weight-bold mb-1"},[t("i",{class:"fas fa-exclamation-triangle mr-1"}),c(" Daftar Ulang Ditolak ")],-1)),t("div",Kt,s(((J=a.selectedParticipant)==null?void 0:J.reregistration_notes)||"Tidak ada catatan penolakan."),1)])])):u("",!0)])])]),t("div",Tt,[t("div",At,[e[31]||(e[31]=t("div",{class:"card-header border-0 py-2"},[t("span",{class:"font-weight-bold"},"Berkas Peserta")],-1)),t("div",Bt,[(M=a.selectedParticipant.participant)!=null&&M.photo_url?(d(),l("div",Ct,[t("img",{src:a.selectedParticipant.participant.photo_url,alt:"Foto Peserta",class:"img-fluid",style:{"object-fit":"cover",width:"100%",height:"100%"}},null,8,jt)])):(d(),l("div",Dt," Tidak ada foto ")),t("ul",Lt,[t("li",Vt,[e[25]||(e[25]=t("span",null,"Foto",-1)),t("span",{class:o(["badge badge-pill",r("photo_url")?"badge-success":"badge-secondary"]),onClick:e[0]||(e[0]=i=>g("photo_url")),style:{cursor:"pointer"}},[t("i",{class:o(r("photo_url")?"fas fa-check":"fas fa-times")},null,2),c(" "+s(r("photo_url")?"Ada":"Kosong"),1)],2)]),t("li",Nt,[e[26]||(e[26]=t("span",null,"KTP",-1)),t("span",{class:o(["badge badge-pill",r("id_card_url")?"badge-success":"badge-secondary"]),onClick:e[1]||(e[1]=i=>g("id_card_url")),style:{cursor:"pointer"}},[t("i",{class:o(r("id_card_url")?"fas fa-check":"fas fa-times")},null,2),c(" "+s(r("id_card_url")?"Ada":"Kosong"),1)],2)]),t("li",It,[e[27]||(e[27]=t("span",null,"Kartu Keluarga",-1)),t("span",{class:o(["badge badge-pill",r("family_card_url")?"badge-success":"badge-secondary"]),onClick:e[2]||(e[2]=i=>g("family_card_url")),style:{cursor:"pointer"}},[t("i",{class:o(r("family_card_url")?"fas fa-check":"fas fa-times")},null,2),c(" "+s(r("family_card_url")?"Ada":"Kosong"),1)],2)]),t("li",Et,[e[28]||(e[28]=t("span",null,"Buku Tabungan",-1)),t("span",{class:o(["badge badge-pill",r("bank_book_url")?"badge-success":"badge-secondary"]),onClick:e[3]||(e[3]=i=>g("bank_book_url")),style:{cursor:"pointer"}},[t("i",{class:o(r("bank_book_url")?"fas fa-check":"fas fa-times")},null,2),c(" "+s(r("bank_book_url")?"Ada":"Kosong"),1)],2)]),t("li",Rt,[e[29]||(e[29]=t("span",null,"Piagam Penghargaan",-1)),t("span",{class:o(["badge badge-pill",r("certificate_url")?"badge-success":"badge-secondary"]),onClick:e[4]||(e[4]=i=>g("certificate_url")),style:{cursor:"pointer"}},[t("i",{class:o(r("certificate_url")?"fas fa-check":"fas fa-times")},null,2),c(" "+s(r("certificate_url")?"Ada":"Kosong"),1)],2)]),t("li",Ft,[e[30]||(e[30]=t("span",null,"Berkas Lain",-1)),t("span",{class:o(["badge badge-pill",r("other_url")?"badge-success":"badge-secondary"]),onClick:e[5]||(e[5]=i=>g("other_url")),style:{cursor:"pointer"}},[t("i",{class:o(r("other_url")?"fas fa-check":"fas fa-times")},null,2),c(" "+s(r("other_url")?"Ada":"Kosong"),1)],2)])])])]),t("div",$t,[t("div",St,[t("table",Jt,[t("tbody",null,[t("tr",null,[t("th",null,[e[32]||(e[32]=c(" Tanggal Input Biodata")),e[33]||(e[33]=t("br",null,null,-1)),t("span",Mt,s(m(x)((U=a.selectedParticipant.participant)==null?void 0:U.created_at)),1)])]),t("tr",null,[t("th",null,[e[34]||(e[34]=c(" Tanggal Update Biodata")),e[35]||(e[35]=t("br",null,null,-1)),t("span",Ut,s(m(x)((H=a.selectedParticipant.participant)==null?void 0:H.updated_at)),1)])])])])])]),P.value?(d(),l("div",Ht,[t("div",Ot,[e[36]||(e[36]=t("span",{class:"font-weight-bold"},"Riwayat Verifikasi",-1)),_.value.length?(d(),l("span",zt,s(_.value.length)+" data ",1)):u("",!0)]),t("div",Gt,[P.value?_.value.length===0?(d(),l("div",qt," Belum ada catatan verifikasi. ")):(d(),l("div",Qt,[(d(!0),l(Q,null,X(_.value,(i,q)=>{var O;return d(),l("div",{key:i.id||q,class:"border rounded p-2 mb-2"},[t("div",Xt,[t("div",null,[t("div",Yt,[t("span",{class:o(["badge",G(i.status)])},s(i.status||"-"),3),t("span",Zt," #"+s(i.id||"-"),1)]),t("div",te,[e[38]||(e[38]=c(" Waktu: ")),t("strong",null,s(m(x)(i.verified_at||i.created_at)),1)]),t("div",ee,[e[39]||(e[39]=c(" Petugas: ")),t("strong",null,s(((O=i.verifier)==null?void 0:O.name)||i.verified_by_name||i.verified_by||"-"),1)])]),t("div",se,[e[40]||(e[40]=t("div",{class:"text-xs text-muted"},"Checklist",-1)),t("div",ae,s(v(i).checked)+" / "+s(v(i).total),1)])]),t("div",ie,[t("span",{class:o(["badge badge-light border mr-1 mb-1",i.checked_photo?"badge-success":"badge-secondary"])}," Foto ",2),t("span",{class:o(["badge badge-light border mr-1 mb-1",i.checked_id_card?"badge-success":"badge-secondary"])}," KTP ",2),t("span",{class:o(["badge badge-light border mr-1 mb-1",i.checked_family_card?"badge-success":"badge-secondary"])}," KK ",2),t("span",{class:o(["badge badge-light border mr-1 mb-1",i.checked_bank_book?"badge-success":"badge-secondary"])}," Tabungan ",2),t("span",{class:o(["badge badge-light border mr-1 mb-1",i.checked_certificate?"badge-success":"badge-secondary"])}," Sertifikat ",2),t("span",{class:o(["badge badge-light border mr-1 mb-1",i.checked_other?"badge-success":"badge-secondary"])}," Lainnya ",2)]),t("div",ne,[i.checked_identity?(d(),l("span",le,"Identitas")):u("",!0),i.checked_contact?(d(),l("span",de,"Kontak")):u("",!0),i.checked_domicile?(d(),l("span",oe,"Domisili")):u("",!0),i.checked_education?(d(),l("span",re,"Pendidikan")):u("",!0),i.checked_bank_account?(d(),l("span",ce,"Rekening")):u("",!0),i.checked_document_dates?(d(),l("span",ue,"Tgl Dokumen")):u("",!0)]),i.notes?(d(),l("div",be,[e[41]||(e[41]=t("div",{class:"text-muted text-xs mb-1"},"Catatan:",-1)),t("div",ge,s(i.notes),1)])):u("",!0),i.field_matches?(d(),l("details",pe,[e[42]||(e[42]=t("summary",{class:"text-xs text-muted",style:{cursor:"pointer"}}," Detail field_matches ",-1)),t("pre",me,s(W(i.field_matches)),1)])):u("",!0)])}),128))])):(d(),l("div",Wt,e[37]||(e[37]=[c(" Verifikasi belum dimuat (aktifkan "),t("code",null,"withVerifications",-1),c(" di list). ")])))])])):u("",!0)])])])):u("",!0),e[44]||(e[44]=t("div",{class:"modal-footer py-2"},[t("button",{type:"button",class:"btn btn-sm btn-secondary","data-dismiss":"modal"}," Tutup ")],-1))])])])}}};export{he as _};
