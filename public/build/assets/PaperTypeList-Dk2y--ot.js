import{F as i,G as C,J as U,P as p,Q as c,R as e,ah as m,av as E,ap as g,W as N,a5 as M,aw as F,U as n,T as P,S as k,Z as G}from"./pinia-BDOwh8JO.js";import{b as y,e as L}from"./app-Cc4vFrcH.js";import{S as d}from"./sweetalert2.esm.all-9Qm2jZ7z.js";const q={class:"content"},A={class:"container-fluid"},H={class:"card"},z={class:"card-header"},I={class:"d-flex justify-content-between align-items-center w-100"},J={class:"card-body table-responsive p-0"},Q={class:"table table-bordered table-hover text-sm mb-0"},R={key:0},W={key:1},Y={class:"badge badge-info text-uppercase"},Z={class:"text-center"},K={class:"btn-group btn-group-sm"},O=["onClick"],X=["onClick"],ee={class:"card-footer clearfix py-2"},te={class:"d-flex justify-content-between align-items-center"},ae={class:"text-muted text-sm"},se={class:"pagination pagination-sm m-0"},le={class:"page-item disabled"},oe={class:"page-link"},ne={class:"modal fade",id:"paperTypeModal"},ie={class:"modal-dialog"},re={class:"modal-content"},de={class:"modal-header py-2"},ue={class:"modal-title"},pe={class:"modal-body"},ce={class:"form-group"},me=["disabled"],ve={class:"form-group"},fe={class:"form-group"},be={class:"text-right"},ge=["disabled"],we={__name:"PaperTypeList",setup(ye){const _=d.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),h=i([]),s=i({}),v=i(""),f=i(10),x=i(!1),u=i(!1),w=i(!1),o=i({id:null,code:"",name:"",description:""}),r=async(l=1)=>{x.value=!0;try{const t=await y.get("/api/v1/paper-types",{params:{page:l,per_page:f.value,search:v.value}});h.value=t.data.data.data,s.value=t.data.data}catch{d.fire({icon:"error",title:"Gagal memuat paper type"})}finally{x.value=!1}},B=()=>{u.value=!1,o.value={id:null,code:"",name:"",description:""},$("#paperTypeModal").modal("show")},S=l=>{u.value=!0,o.value={...l},$("#paperTypeModal").modal("show")},V=async()=>{var l,t;w.value=!0;try{u.value?(await y.put(`/api/v1/paper-types/${o.value.id}`,o.value),_.fire({icon:"success",title:"Paper type diperbarui"})):(await y.post("/api/v1/paper-types",o.value),_.fire({icon:"success",title:"Paper type ditambahkan"})),$("#paperTypeModal").modal("hide"),r(s.value.current_page)}catch(a){d.fire({icon:"error",title:"Gagal menyimpan data",text:((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Terjadi kesalahan"})}finally{w.value=!1}},j=async l=>{var a;if((await d.fire({title:"Hapus paper type?",text:`"${l.name}" akan dihapus`,icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus",cancelButtonText:"Batal"})).isConfirmed)try{await y.delete(`/api/v1/paper-types/${l.id}`),_.fire({icon:"success",title:"Paper type berhasil dihapus"}),r(s.value.current_page)}catch(b){((a=b.response)==null?void 0:a.status)===422?d.fire({icon:"warning",title:"Tidak bisa dihapus",text:b.response.data.message}):d.fire({icon:"error",title:"Gagal menghapus",text:"Terjadi kesalahan sistem"})}},T=l=>{l<1||l>s.value.last_page||r(l)};return C(v,L(()=>r(1),400)),C(f,()=>r(1)),U(r),(l,t)=>(c(),p(M,null,[e("section",{class:"content-header"},[e("div",{class:"container-fluid"},[e("div",{class:"d-flex justify-content-between align-items-center"},[t[7]||(t[7]=e("div",null,[e("h1",{class:"mb-1"},"Paper Types"),e("p",{class:"mb-0 text-muted text-sm"}," Manajemen tipe paper (Abstract, Case, dll). ")],-1)),e("button",{class:"btn btn-primary btn-sm",onClick:B}," + Tambah Paper Type ")])])]),e("section",q,[e("div",A,[e("div",H,[e("div",z,[e("div",I,[e("div",null,[t[9]||(t[9]=e("label",{class:"mb-0 mr-1 text-sm text-muted"},"Tampilkan",-1)),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>f.value=a),class:"form-control form-control-sm d-inline-block w-auto"},t[8]||(t[8]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1)]),512),[[E,f.value,void 0,{number:!0}]]),t[10]||(t[10]=e("span",{class:"text-sm text-muted ml-1"},"Entri",-1))]),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>v.value=a),type:"text",class:"form-control form-control-sm w-auto",style:{"min-width":"220px"},placeholder:"Cari code / nama..."},null,512),[[g,v.value]])])]),e("div",J,[e("table",Q,[t[15]||(t[15]=e("thead",{class:"thead-light"},[e("tr",null,[e("th",{style:{width:"40px"}},"#"),e("th",{style:{width:"160px"}},"Code"),e("th",null,"Nama"),e("th",null,"Deskripsi"),e("th",{style:{width:"110px"},class:"text-center"},"Aksi")])],-1)),e("tbody",null,[x.value?(c(),p("tr",R,t[11]||(t[11]=[e("td",{colspan:"5",class:"text-center"},"Memuat data...",-1)]))):h.value.length===0?(c(),p("tr",W,t[12]||(t[12]=[e("td",{colspan:"5",class:"text-center text-muted"}," Belum ada paper type. ",-1)]))):N("",!0),(c(!0),p(M,null,F(h.value,(a,b)=>(c(),p("tr",{key:a.id},[e("td",null,n(b+1+(s.value.current_page-1)*s.value.per_page),1),e("td",null,[e("span",Y,n(a.code),1)]),e("td",null,[e("strong",null,n(a.name),1)]),e("td",null,n(a.description||"-"),1),e("td",Z,[e("div",K,[e("button",{class:"btn btn-warning",onClick:D=>S(a)},t[13]||(t[13]=[e("i",{class:"fas fa-edit"},null,-1)]),8,O),e("button",{class:"btn btn-danger",onClick:D=>j(a)},t[14]||(t[14]=[e("i",{class:"fas fa-trash"},null,-1)]),8,X)])])]))),128))])])]),e("div",ee,[e("div",te,[e("div",ae," Menampilkan "+n(s.value.from||0)+" - "+n(s.value.to||0)+" dari "+n(s.value.total||0)+" data ",1),e("ul",se,[e("li",{class:P(["page-item",{disabled:s.value.current_page===1}])},[e("a",{href:"#",class:"page-link",onClick:t[2]||(t[2]=k(a=>T(s.value.current_page-1),["prevent"]))},"«")],2),e("li",le,[e("span",oe," Halaman "+n(s.value.current_page)+" / "+n(s.value.last_page),1)]),e("li",{class:P(["page-item",{disabled:s.value.current_page===s.value.last_page}])},[e("a",{href:"#",class:"page-link",onClick:t[3]||(t[3]=k(a=>T(s.value.current_page+1),["prevent"]))},"»")],2)])])])])]),e("div",ne,[e("div",ie,[e("div",re,[e("div",de,[e("h5",ue,n(u.value?"Edit Paper Type":"Tambah Paper Type"),1),t[16]||(t[16]=e("button",{type:"button",class:"close","data-dismiss":"modal"},[e("span",null,"×")],-1))]),e("div",pe,[e("form",{onSubmit:k(V,["prevent"])},[e("div",ce,[t[17]||(t[17]=e("label",null,"Code",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.code=a),class:"form-control form-control-sm text-uppercase",disabled:u.value,required:""},null,8,me),[[g,o.value.code]])]),e("div",ve,[t[18]||(t[18]=e("label",null,"Nama",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>o.value.name=a),class:"form-control form-control-sm",required:""},null,512),[[g,o.value.name]])]),e("div",fe,[t[19]||(t[19]=e("label",null,"Deskripsi",-1)),m(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=a=>o.value.description=a),class:"form-control form-control-sm",rows:"3"},null,512),[[g,o.value.description]])]),e("div",be,[e("button",{class:"btn btn-primary btn-sm",disabled:w.value},t[20]||(t[20]=[e("i",{class:"fas fa-save mr-1"},null,-1),G(" Simpan ")]),8,ge)])],32)])])])])])],64))}};export{we as default};
