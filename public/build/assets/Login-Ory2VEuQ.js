import{F as u,B as D,A as P,P as l,Q as i,X as x,R as s,Y as q,a1 as M,as as T,S as B,ah as p,ap as S,at as L,T as N,au as R,W as U,U as K}from"./pinia-BDOwh8JO.js";import{_ as j,u as F,a as z,b as E}from"./app-Cc4vFrcH.js";import{u as H}from"./MasterDataStore-CM6auH0g.js";const I={class:"mtq-login-page"},Q={key:0,class:"loading-overlay"},W={class:"mtq-login-container"},X={class:"mtq-login-card justify-content-center"},Y={class:"mtq-login-right w-100"},$={class:"card mtq-login-form-card"},G={class:"card-body login-card-body"},J={key:0,class:"alert alert-danger"},O={class:"input-group mb-3"},Z={class:"input-group mb-3"},ss=["type"],ts={class:"input-group-append"},es={class:"input-group mb-3 align-items-center"},as={class:"input-group-append"},os={class:"input-group-text p-0 bg-white"},ns=["src"],ls={class:"row mb-3 align-items-center"},is={class:"col-8"},rs={class:"icheck-primary"},ds={class:"col-4 text-right"},cs=["disabled"],us={key:0},ps={key:1},ms={__name:"Login",setup(fs){const C=z(),m=F();H();const v=u("/captcha?"+Date.now()),h=()=>{e.captcha="",v.value="/captcha?"+Date.now()},V=D(()=>e.captcha&&e.captcha.length>=4),e=P({username:"",password:"",captcha:"",remember:!0}),r=u(!1),n=u(!1),d=u(""),A=async()=>{var f,t,a,b,_,y,k,w;n.value=!0,d.value="";try{await E.post("/login",{...e}),await m.getAuthUser(),m.isAuthenticated=!0,m.activeLayout="admin",C.push("/admin/dashboard")}catch(g){let c=((t=(f=g.response)==null?void 0:f.data)==null?void 0:t.message)||"Terjadi kesalahan saat login.";if(((a=g.response)==null?void 0:a.status)===422){const o=((_=(b=g.response)==null?void 0:b.data)==null?void 0:_.errors)||{};(y=o.username)!=null&&y.length?c=o.username[0]:(k=o.password)!=null&&k.length?c=o.password[0]:(w=o.captcha)!=null&&w.length&&(c=o.captcha[0])}d.value=c}finally{setTimeout(()=>n.value=!1,400)}};return(f,t)=>(i(),l("div",I,[x(M,{name:"fade"},{default:q(()=>[n.value?(i(),l("div",Q,t[5]||(t[5]=[s("div",{class:"spinner"},null,-1),s("p",null,"Memproses login...",-1)]))):U("",!0)]),_:1}),s("div",W,[s("div",X,[s("div",Y,[t[11]||(t[11]=s("div",{class:"mtq-login-header text-center mb-4"},[s("h1",{class:"mtq-login-title"},"Kelakar Padang Symcard"),s("p",{class:"mtq-login-subtitle"},"Admin Portal"),s("p",{class:"mtq-login-tagline"}," Silakan login untuk mengakses dashboard administrasi ")],-1)),s("div",$,[s("div",G,[t[9]||(t[9]=s("p",{class:"login-box-msg"},"Masuk ke sistem",-1)),x(M,{name:"fade"},{default:q(()=>[d.value?(i(),l("div",J,K(d.value),1)):U("",!0)]),_:1}),s("form",{onSubmit:B(A,["prevent"]),autocomplete:"off"},[s("div",O,[p(s("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.username=a),type:"text",class:"form-control",placeholder:"Username",required:""},null,512),[[S,e.username]]),t[6]||(t[6]=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text mtq-input-icon"},[s("i",{class:"fas fa-user"})])],-1))]),s("div",Z,[p(s("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.password=a),type:r.value?"text":"password",class:"form-control",placeholder:"Password",required:""},null,8,ss),[[L,e.password]]),s("div",ts,[s("button",{class:"input-group-text mtq-input-icon",type:"button",onClick:t[2]||(t[2]=a=>r.value=!r.value)},[s("i",{class:N(r.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),s("div",es,[p(s("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.captcha=a),type:"text",class:"form-control text-uppercase",placeholder:"Kode captcha",required:""},null,512),[[S,e.captcha]]),s("div",as,[s("span",os,[s("img",{src:v.value,class:"captcha-img",onClick:h},null,8,ns)])]),s("div",{class:"input-group-append"},[s("button",{type:"button",class:"btn btn-outline-secondary",onClick:h},t[7]||(t[7]=[s("i",{class:"fas fa-sync-alt"},null,-1)]))])]),s("div",ls,[s("div",is,[s("div",rs,[p(s("input",{type:"checkbox",id:"remember","onUpdate:modelValue":t[4]||(t[4]=a=>e.remember=a)},null,512),[[R,e.remember]]),t[8]||(t[8]=s("label",{for:"remember"},"Â  Remember Me",-1))])]),s("div",ds,[s("button",{type:"submit",class:"btn btn-success btn-block",disabled:n.value||!V.value},[n.value?(i(),l("span",us,"Memuat...")):(i(),l("span",ps,"MASUK"))],8,cs)])])],32),t[10]||(t[10]=T('<div class="mtq-login-footer-links" data-v-f260ceff><p class="mb-1" data-v-f260ceff> Lupa Password? <a href="/password/wa/request" target="_blank" data-v-f260ceff>Reset di sini</a></p><p class="mb-0" data-v-f260ceff><a class="text-sm text-muted" href="https://wa.me/6282298476941" target="_blank" data-v-f260ceff> Hubungi admin </a></p></div>',1))])])])])])]))}},bs=j(ms,[["__scopeId","data-v-f260ceff"]]);export{bs as default};
