import{z as D,A as n,O as P,V as E,B as r,C as d,D as e,S as m,as as c,K as u,J as i,I as L,U as C,ay as N,H as y,F as h,aB as A,a as _,aC as B}from"./AuthUserStore-67h2FHdL.js";import{_ as G}from"./app-CZBZEz52.js";const R={class:"content"},j={class:"container-fluid"},F={class:"card"},q={class:"card-header d-flex justify-content-between align-items-center"},z={class:"text-muted text-sm"},H={class:"card-body table-responsive p-0"},I={class:"table table-bordered table-hover text-sm"},J={key:0},O={key:1},Y={class:"text-center"},Q={class:"text-center"},W={class:"btn-group btn-group-sm"},X=["onClick"],Z=["onClick"],ee={class:"card-footer clearfix"},te={class:"d-flex justify-content-between align-items-center"},se={class:"text-muted text-sm"},ae={class:"pagination pagination-sm m-0"},oe={class:"page-item disabled"},le={class:"page-link"},ie={class:"modal fade",id:"masterCategoryModal",tabindex:"-1",role:"dialog"},ne={class:"modal-dialog modal-lg",role:"document"},re={class:"modal-content"},de={class:"modal-header py-2"},ue={class:"modal-title",id:"masterCategoryModalLabel"},me={class:"modal-body pt-2"},pe={class:"row"},ce={class:"col-md-6"},ve={class:"form-group mb-2"},ge={class:"form-group mb-2"},be={class:"form-group mb-2"},_e={class:"form-group mb-2"},fe={class:"col-md-6"},ke={class:"form-group mb-2"},ye={class:"text-end mt-3"},he=["disabled"],xe={key:0,class:"fas fa-spinner fa-spin me-1"},Ce={key:1,class:"fas fa-save me-1"},we={__name:"MasterCompetitionCategoryList",setup(Me){const w=D(),f=n([]),l=n({current_page:1,per_page:10,total:0,from:0,to:0,last_page:1}),v=n(""),k=n(!1),g=n(!1),b=n(!1),a=n({id:null,code:"",name:"",order_number:1,description:"",is_active:!0}),p=async(o=1)=>{k.value=!0;try{const s=(await _.get("/api/v1/master-competition-categories",{params:{page:o,search:v.value}})).data.data;f.value=s.data||[],l.value={current_page:s.current_page,per_page:s.per_page,total:s.total,from:s.from,to:s.to,last_page:s.last_page}}catch(t){t.response&&t.response.status===401?(console.warn("Unauthorized. Logging out..."),w.logout()):console.error("Gagal memuat kategori kompetisi:",t)}finally{k.value=!1}},x=o=>{o<1||o>l.value.last_page||p(o)},M=()=>{g.value=!1,a.value={id:null,code:"",name:"",order_number:(l.value.total||0)+1,description:"",is_active:!0},$("#masterCategoryModal").modal("show")},K=o=>{g.value=!0,a.value={id:o.id,code:o.code,name:o.name,order_number:o.order_number,description:o.description,is_active:!!o.is_active},$("#masterCategoryModal").modal("show")},U=async()=>{b.value=!0;const o={code:a.value.code,name:a.value.name,order_number:a.value.order_number,description:a.value.description,is_active:a.value.is_active};try{g.value&&a.value.id?await _.put(`/api/v1/master-competition-categories/${a.value.id}`,o):await _.post("/api/v1/master-competition-categories",o),$("#masterCategoryModal").modal("hide"),p(l.value.current_page)}catch(t){console.error("Gagal menyimpan kategori kompetisi:",t),alert("Gagal menyimpan data kategori.")}finally{b.value=!1}},S=async o=>{if(confirm(`Yakin ingin menghapus kategori "${o.name}"?`))try{await _.delete(`/api/v1/master-competition-categories/${o.id}`),p(l.value.current_page)}catch(t){console.error("Gagal menghapus kategori kompetisi:",t),alert("Gagal menghapus kategori.")}};return P(()=>v.value,B(()=>p(1),400)),E(()=>{p()}),(o,t)=>(d(),r(C,null,[e("section",{class:"content-header"},[e("div",{class:"container-fluid"},[e("div",{class:"d-flex justify-content-between align-items-center"},[t[8]||(t[8]=e("h1",{class:"mb-2"},"Master Kategori Kompetisi",-1)),e("button",{class:"btn btn-primary btn-sm",onClick:M}," + Tambah Kategori ")]),t[9]||(t[9]=e("p",{class:"text-muted text-sm mb-0"}," Kategori kompetisi, misalnya: Putra, Putri, Reguler, Disabilitas, dll. ",-1))])]),e("section",R,[e("div",j,[e("div",F,[e("div",q,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),type:"text",class:"form-control form-control-sm w-50",placeholder:"Cari kode atau nama kategori..."},null,512),[[c,v.value]]),e("span",z,[t[10]||(t[10]=u(" Total: ")),e("strong",null,i(l.value.total||0),1),t[11]||(t[11]=u(" kategori "))])]),e("div",H,[e("table",I,[t[16]||(t[16]=e("thead",{class:"thead-light"},[e("tr",null,[e("th",{style:{width:"40px"}},"#"),e("th",{style:{width:"120px"}},"Kode"),e("th",null,"Nama Kategori"),e("th",{style:{width:"80px"}},"Urutan"),e("th",null,"Deskripsi"),e("th",{style:{width:"90px"}},"Status"),e("th",{style:{width:"90px"},class:"text-center"},"Aksi")])],-1)),e("tbody",null,[k.value?(d(),r("tr",J,t[12]||(t[12]=[e("td",{colspan:"7",class:"text-center"},"Memuat data...",-1)]))):f.value.length===0?(d(),r("tr",O,t[13]||(t[13]=[e("td",{colspan:"7",class:"text-center"},[u(" Belum ada data kategori kompetisi. "),e("br"),e("small",{class:"text-muted"},[u(" Klik "),e("strong",null,"Tambah Kategori"),u(" untuk menambahkan. ")])],-1)]))):L("",!0),(d(!0),r(C,null,N(f.value,(s,V)=>(d(),r("tr",{key:s.id},[e("td",null,i(V+1+(l.value.current_page-1)*l.value.per_page),1),e("td",null,[e("code",null,i(s.code),1)]),e("td",null,[e("strong",null,i(s.name),1)]),e("td",Y,i(s.order_number),1),e("td",null,i(s.description||"-"),1),e("td",null,[e("span",{class:y(["badge",s.is_active?"badge-success":"badge-secondary"])},i(s.is_active?"Aktif":"Nonaktif"),3)]),e("td",Q,[e("div",W,[e("button",{class:"btn btn-warning",onClick:T=>K(s),title:"Edit"},t[14]||(t[14]=[e("i",{class:"fas fa-edit"},null,-1)]),8,X),e("button",{class:"btn btn-danger",onClick:T=>S(s),title:"Hapus"},t[15]||(t[15]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Z)])])]))),128))])])]),e("div",ee,[e("div",te,[e("div",se," Menampilkan "+i(l.value.from||0)+" - "+i(l.value.to||0)+" dari "+i(l.value.total||0)+" kategori ",1),e("ul",ae,[e("li",{class:y(["page-item",{disabled:l.value.current_page===1}])},[e("a",{class:"page-link",href:"#",onClick:t[1]||(t[1]=h(s=>x(l.value.current_page-1),["prevent"]))}," « ")],2),e("li",oe,[e("span",le," Halaman "+i(l.value.current_page)+" / "+i(l.value.last_page||1),1)]),e("li",{class:y(["page-item",{disabled:l.value.current_page===l.value.last_page}])},[e("a",{class:"page-link",href:"#",onClick:t[2]||(t[2]=h(s=>x(l.value.current_page+1),["prevent"]))}," » ")],2)])])])])]),e("div",ie,[e("div",ne,[e("div",re,[e("div",de,[e("h5",ue,[t[17]||(t[17]=e("i",{class:"fas fa-tags me-2"},null,-1)),u(" "+i(g.value?"Edit Kategori Kompetisi":"Tambah Kategori Kompetisi"),1)]),t[18]||(t[18]=e("button",{type:"button",class:"close","data-dismiss":"modal"},[e("span",null,"×")],-1))]),e("div",me,[e("form",{onSubmit:h(U,["prevent"])},[e("div",pe,[e("div",ce,[e("div",ve,[t[19]||(t[19]=e("label",{class:"mb-1"},"Kode Kategori",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.code=s),class:"form-control form-control-sm",required:"",placeholder:"Misal: PUTRA, PUTRI, REGULER"},null,512),[[c,a.value.code]]),t[20]||(t[20]=e("small",{class:"text-muted"}," Disarankan huruf kapital tanpa spasi, gunakan underscore jika perlu. ",-1))]),e("div",ge,[t[21]||(t[21]=e("label",{class:"mb-1"},"Nama Kategori",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.name=s),class:"form-control form-control-sm",required:"",placeholder:"Misal: Putra, Putri, Reguler"},null,512),[[c,a.value.name]])]),e("div",be,[t[22]||(t[22]=e("label",{class:"mb-1"},"Urutan Tampil",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.order_number=s),type:"number",min:"1",class:"form-control form-control-sm",required:""},null,512),[[c,a.value.order_number,void 0,{number:!0}]])]),e("div",_e,[t[24]||(t[24]=e("label",{class:"mb-1"},"Status",-1)),m(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.is_active=s),class:"form-control form-control-sm"},t[23]||(t[23]=[e("option",{value:!0},"Aktif",-1),e("option",{value:!1},"Nonaktif",-1)]),512),[[A,a.value.is_active]])])]),e("div",fe,[e("div",ke,[t[25]||(t[25]=e("label",{class:"mb-1"},"Deskripsi",-1)),m(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>a.value.description=s),rows:"5",class:"form-control form-control-sm",placeholder:"Contoh: Kategori khusus peserta laki-laki (Putra)."},null,512),[[c,a.value.description]])])])]),e("div",ye,[e("button",{type:"submit",class:"btn btn-sm btn-primary",disabled:b.value},[b.value?(d(),r("i",xe)):(d(),r("i",Ce)),t[26]||(t[26]=u(" Simpan "))],8,he)])],32)])])])])])],64))}},Se=G(we,[["__scopeId","data-v-39e41e57"]]);export{Se as default};
