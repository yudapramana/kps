import{y as b,A as u,z as I,O as A,V as C,B as n,C as o,D as e,I as p,K as i,J as c,S as k,aB as x,U as y,ay as S,a as D}from"./AuthUserStore-67h2FHdL.js";import{S as f}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{_ as G}from"./app-CZBZEz52.js";const M={class:"content-header"},T={class:"container-fluid"},$={class:"d-flex justify-content-between align-items-center"},L={key:0,class:"mb-0 mt-1 text-sm text-muted"},N={key:0},J=["disabled"],O={key:0,class:"text-danger text-sm mt-2 mb-0"},Q={class:"content"},j={class:"container-fluid"},z={class:"card"},q={class:"card-body"},H={class:"row"},W={class:"col-md-6"},X={class:"form-group"},Y={key:0,class:"col-md-6"},Z={class:"form-group"},ee=["disabled"],te=["value"],ae={key:1,class:"col-md-6"},le={class:"form-group"},se=["disabled"],ne=["value"],oe={key:0,class:"text-muted"},ie={__name:"KokardeExport",setup(re){const K=b(()=>!r.value||V.value?!1:s.value==="participant"?!!d.value:s.value==="role"?!!v.value:!1),R=I(),m=b(()=>R.eventData||null),r=b(()=>{var a;return((a=m.value)==null?void 0:a.id)||null}),h=u([]),d=u(""),_=u(!1),V=u(!1),s=u("participant"),v=u(""),g=u([]),U=async()=>{_.value=!0;try{const a=await D.get("/api/v1/master",{params:{type:"event_regions",event_id:r.value}});h.value=a.data.data||[]}catch(a){console.error(a),f.fire("Gagal","Gagal memuat data kontingen.","error")}finally{_.value=!1}},B=async()=>{try{const a=await D.get("/api/v1/roles");g.value=a.data||[]}catch(a){console.error("Gagal memuat roles:",a)}},F=()=>{if(!r.value){f.fire("Event belum dipilih","","warning");return}if(s.value==="participant"&&!d.value){f.fire("Kontingen belum dipilih","","warning");return}if(s.value==="role"&&!v.value){f.fire("Role belum dipilih","","warning");return}let a=`/api/v1/event-kokarde/export/pdf?event_id=${r.value}&type=${s.value}`;s.value==="participant"&&(a+=`&region_id=${d.value}`),s.value==="role"&&(a+=`&role_id=${v.value}`),window.open(a,"_blank")};return A(s,a=>{a==="participant"?v.value="":d.value=""}),C(()=>{r.value?(U(),B()):f.fire("Event belum dipilih","Silakan pilih event melalui Portal Event terlebih dahulu.","info")}),(a,t)=>{var w,E,P;return o(),n(y,null,[e("section",M,[e("div",T,[e("div",$,[e("div",null,[t[5]||(t[5]=e("h1",{class:"mb-1"},"Cetak Kokarde Peserta MTQ",-1)),t[6]||(t[6]=e("p",{class:"mb-0 text-muted text-sm"}," Generate dan unduh kokarde peserta MTQ per kontingen dalam format PDF (A6). ",-1)),r.value?(o(),n("p",L,[t[3]||(t[3]=i(" Event aktif: ")),e("strong",null,c((w=m.value)==null?void 0:w.event_name),1),(E=m.value)!=null&&E.event_year?(o(),n("span",N," ("+c(m.value.event_year)+") ",1)):p("",!0),t[4]||(t[4]=i(" â€¢ Lokasi: ")),e("strong",null,c(((P=m.value)==null?void 0:P.event_location)||"-"),1)])):p("",!0)]),e("div",null,[e("button",{class:"btn btn-outline-danger btn-sm",onClick:F,disabled:!K.value},t[7]||(t[7]=[e("i",{class:"fas fa-file-pdf mr-1"},null,-1),i(" Export PDF ")]),8,J)])]),r.value?p("",!0):(o(),n("p",O,t[8]||(t[8]=[e("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1),i(" Event belum dipilih. Silakan pilih event melalui Portal Event. ")])))])]),e("section",Q,[e("div",j,[e("div",z,[e("div",q,[e("div",H,[e("div",W,[e("div",X,[t[10]||(t[10]=e("label",null,[i("Jenis Kokarde "),e("span",{class:"text-danger"},"*")],-1)),k(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.value=l),class:"form-control"},t[9]||(t[9]=[e("option",{value:"participant"},"Peserta",-1),e("option",{value:"role"},"Panitia / Role",-1)]),512),[[x,s.value]])])]),s.value==="participant"?(o(),n("div",Y,[e("div",Z,[t[12]||(t[12]=e("label",null,[i(" Kontingen "),e("span",{class:"text-danger"},"*")],-1)),k(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>d.value=l),class:"form-control",disabled:_.value},[t[11]||(t[11]=e("option",{value:""},"-- Pilih Kontingen --",-1)),(o(!0),n(y,null,S(h.value,l=>(o(),n("option",{key:l.id,value:l.id},c(l.name),9,te))),128))],8,ee),[[x,d.value]])])])):p("",!0),s.value==="role"?(o(),n("div",ae,[e("div",le,[t[14]||(t[14]=e("label",null,[i(" Role Panitia "),e("span",{class:"text-danger"},"*")],-1)),k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>v.value=l),class:"form-control",disabled:g.value.length===0},[t[13]||(t[13]=e("option",{value:""},"-- Pilih Role --",-1)),(o(!0),n(y,null,S(g.value,l=>(o(),n("option",{key:l.id,value:l.id},c(l.label??l.name),9,ne))),128))],8,se),[[x,v.value]]),g.value.length===0?(o(),n("small",oe," Role panitia belum tersedia ")):p("",!0)])])):p("",!0)]),t[15]||(t[15]=e("div",{class:"alert alert-info text-sm mb-0"},[e("i",{class:"fas fa-info-circle mr-1"}),i(" File PDF akan berisi "),e("strong",null,"seluruh peserta"),i(" dari kontingen terpilih, dengan "),e("strong",null,"1 peserta = 1 halaman A6"),i(". ")],-1))])])])])],64)}}},pe=G(ie,[["__scopeId","data-v-a98a7a3d"]]);export{pe as default};
