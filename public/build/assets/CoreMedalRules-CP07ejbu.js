import{A as d,O as w,V as D,B as u,C as m,D as e,S as i,aB as M,as as c,I as E,U as C,ay as R,J as o,H as y,F as h,K as T,a as b,aC as j}from"./AuthUserStore-67h2FHdL.js";const F={class:"content"},H={class:"container-fluid"},P={class:"card"},K={class:"card-header"},q={class:"d-flex justify-content-between align-items-center w-100"},I={class:"card-body table-responsive p-0"},J={class:"table table-bordered table-hover text-sm mb-0"},L={key:0},z={key:1},O={class:"text-center"},G={class:"text-center"},Q={class:"text-center"},W={class:"text-center"},X={class:"btn-group btn-group-sm"},Y=["onClick"],Z=["onClick"],ee={class:"card-footer clearfix py-2"},te={class:"d-flex justify-content-between align-items-center"},ae={class:"text-muted text-sm"},se={class:"pagination pagination-sm m-0"},le={class:"page-item disabled"},oe={class:"page-link"},ne={class:"modal fade",id:"medalRuleModal"},de={class:"modal-dialog modal-lg"},ie={class:"modal-content"},re={class:"modal-header py-2"},ue={class:"modal-title"},me={class:"modal-body"},ce={class:"row"},ve={class:"col-md-6"},pe={class:"form-group"},_e={class:"form-group"},be={class:"col-md-3"},fe={class:"form-group"},ge={class:"form-group"},xe={class:"col-md-3"},ye={class:"form-group"},he={class:"text-right"},ke=["disabled"],Ce={__name:"CoreMedalRules",setup(we){const f=d([]),s=d({}),v=d(""),p=d(10),g=d(!1),_=d(!1),x=d(!1),l=d({id:null,medal_code:"",medal_name:"",order_number:1,point:0,is_active:!0}),r=async(n=1)=>{g.value=!0;const t=await b.get("/api/v1/medal-rules",{params:{page:n,per_page:p.value,search:v.value}});f.value=t.data.data.data,s.value=t.data.data,g.value=!1},V=()=>{_.value=!1,l.value={id:null,medal_code:"",medal_name:"",order_number:1,point:0,is_active:!0},$("#medalRuleModal").modal("show")},U=n=>{_.value=!0,l.value={...n},$("#medalRuleModal").modal("show")},A=async()=>{x.value=!0,_.value?await b.put(`/api/v1/medal-rules/${l.value.id}`,l.value):await b.post("/api/v1/medal-rules",l.value),$("#medalRuleModal").modal("hide"),r(s.value.current_page),x.value=!1},S=async n=>{confirm(`Hapus aturan "${n.medal_name}"?`)&&(await b.delete(`/api/v1/medal-rules/${n.id}`),r(s.value.current_page))},k=n=>r(n);return w(v,j(()=>r(1),400)),w(p,()=>r(1)),D(r),(n,t)=>(m(),u(C,null,[e("section",{class:"content-header"},[e("div",{class:"container-fluid"},[e("div",{class:"d-flex justify-content-between align-items-center"},[t[9]||(t[9]=e("div",null,[e("h1",{class:"mb-1"},"Master Aturan Medali"),e("p",{class:"mb-0 text-muted text-sm"}," Digunakan untuk mendefinisikan jenis medali dan poin (Juara, Harapan, dll). ")],-1)),e("button",{class:"btn btn-primary btn-sm",onClick:V}," + Tambah Aturan Medali ")])])]),e("section",F,[e("div",H,[e("div",P,[e("div",K,[e("div",q,[e("div",null,[t[11]||(t[11]=e("label",{class:"mb-0 mr-1 text-sm text-muted"},"Tampilkan",-1)),i(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),class:"form-control form-control-sm d-inline-block w-auto"},t[10]||(t[10]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1)]),512),[[M,p.value,void 0,{number:!0}]]),t[12]||(t[12]=e("span",{class:"text-sm text-muted ml-1"},"Entri",-1))]),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>v.value=a),type:"text",class:"form-control form-control-sm w-auto",style:{"min-width":"220px"},placeholder:"Cari kode / nama medali..."},null,512),[[c,v.value]])])]),e("div",I,[e("table",J,[t[17]||(t[17]=e("thead",{class:"thead-light"},[e("tr",null,[e("th",{style:{width:"40px"}},"#"),e("th",{style:{width:"120px"}},"Kode"),e("th",null,"Nama Medali"),e("th",{style:{width:"90px"},class:"text-center"},"Urutan"),e("th",{style:{width:"90px"},class:"text-center"},"Poin"),e("th",{style:{width:"80px"},class:"text-center"},"Status"),e("th",{style:{width:"110px"},class:"text-center"},"Aksi")])],-1)),e("tbody",null,[g.value?(m(),u("tr",L,t[13]||(t[13]=[e("td",{colspan:"7",class:"text-center"},"Memuat data...",-1)]))):f.value.length===0?(m(),u("tr",z,t[14]||(t[14]=[e("td",{colspan:"7",class:"text-center text-muted"}," Belum ada aturan medali. ",-1)]))):E("",!0),(m(!0),u(C,null,R(f.value,(a,N)=>(m(),u("tr",{key:a.id},[e("td",null,o(N+1+(s.value.current_page-1)*s.value.per_page),1),e("td",null,[e("code",null,o(a.medal_code),1)]),e("td",null,[e("strong",null,o(a.medal_name),1)]),e("td",O,o(a.order_number),1),e("td",G,o(a.point),1),e("td",Q,[e("span",{class:y(["badge",a.is_active?"badge-success":"badge-secondary"])},o(a.is_active?"Aktif":"Nonaktif"),3)]),e("td",W,[e("div",X,[e("button",{class:"btn btn-warning",onClick:B=>U(a)},t[15]||(t[15]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Y),e("button",{class:"btn btn-danger",onClick:B=>S(a)},t[16]||(t[16]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Z)])])]))),128))])])]),e("div",ee,[e("div",te,[e("div",ae," Menampilkan "+o(s.value.from||0)+" - "+o(s.value.to||0)+" dari "+o(s.value.total||0)+" data ",1),e("ul",se,[e("li",{class:y(["page-item",{disabled:s.value.current_page===1}])},[e("a",{href:"#",class:"page-link",onClick:t[2]||(t[2]=h(a=>k(s.value.current_page-1),["prevent"]))},"«")],2),e("li",le,[e("span",oe," Halaman "+o(s.value.current_page)+" / "+o(s.value.last_page),1)]),e("li",{class:y(["page-item",{disabled:s.value.current_page===s.value.last_page}])},[e("a",{href:"#",class:"page-link",onClick:t[3]||(t[3]=h(a=>k(s.value.current_page+1),["prevent"]))},"»")],2)])])])])]),e("div",ne,[e("div",de,[e("div",ie,[e("div",re,[e("h5",ue,o(_.value?"Edit Aturan Medali":"Tambah Aturan Medali"),1),t[18]||(t[18]=e("button",{type:"button",class:"close","data-dismiss":"modal"},[e("span",null,"×")],-1))]),e("div",me,[e("form",{onSubmit:h(A,["prevent"])},[e("div",ce,[e("div",ve,[e("div",pe,[t[19]||(t[19]=e("label",null,"Kode Medali",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>l.value.medal_code=a),class:"form-control form-control-sm",required:""},null,512),[[c,l.value.medal_code]])]),e("div",_e,[t[20]||(t[20]=e("label",null,"Nama Medali",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>l.value.medal_name=a),class:"form-control form-control-sm",required:""},null,512),[[c,l.value.medal_name]])])]),e("div",be,[e("div",fe,[t[21]||(t[21]=e("label",null,"Urutan",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>l.value.order_number=a),type:"number",min:"1",class:"form-control form-control-sm"},null,512),[[c,l.value.order_number,void 0,{number:!0}]])]),e("div",ge,[t[22]||(t[22]=e("label",null,"Poin",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>l.value.point=a),type:"number",min:"0",class:"form-control form-control-sm"},null,512),[[c,l.value.point,void 0,{number:!0}]])])]),e("div",xe,[e("div",ye,[t[24]||(t[24]=e("label",null,"Status",-1)),i(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>l.value.is_active=a),class:"form-control form-control-sm"},t[23]||(t[23]=[e("option",{value:!0},"Aktif",-1),e("option",{value:!1},"Nonaktif",-1)]),512),[[M,l.value.is_active]])])])]),e("div",he,[e("button",{class:"btn btn-primary btn-sm",disabled:x.value},t[25]||(t[25]=[e("i",{class:"fas fa-save mr-1"},null,-1),T(" Simpan ")]),8,ke)])],32)])])])])])],64))}};export{Ce as default};
