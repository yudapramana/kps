import{z as A,A as i,O as w,V as D,B as d,C as r,D as e,S as m,aB as j,as as p,I as B,K as c,U as C,ay as G,J as n,H as F,F as x,a as _,aC as N}from"./AuthUserStore-67h2FHdL.js";const P={class:"content"},E={class:"container-fluid"},z={class:"card"},H={class:"card-header"},I={class:"d-flex flex-wrap justify-content-between align-items-center w-100"},J={class:"d-flex flex-wrap align-items-center"},q={class:"card-body table-responsive p-0"},O={class:"table table-bordered table-hover text-sm mb-0"},R={key:0},W={key:1},Y={class:"text-center"},Q={class:"text-center"},X={class:"btn-group btn-group-sm"},Z=["onClick"],ee=["onClick"],te={class:"card-footer clearfix py-2"},ae={class:"d-flex justify-content-between align-items-center"},se={class:"text-muted text-sm"},le={class:"pagination pagination-sm m-0"},oe={class:"page-item disabled"},ne={class:"page-link"},ie={class:"modal fade",id:"listFieldModal",tabindex:"-1",role:"dialog","aria-labelledby":"listFieldModalLabel"},de={class:"modal-dialog modal-lg",role:"document"},re={class:"modal-content"},ue={class:"modal-header py-2"},me={class:"modal-title",id:"listFieldModalLabel"},pe={class:"modal-body pt-2"},ce={class:"row"},ve={class:"col-md-5"},be={class:"form-group mb-2"},fe={class:"form-group mb-2"},ge={class:"form-group mb-2"},_e={class:"col-md-7"},ke={class:"form-group mb-2"},he={class:"text-right mt-3"},xe=["disabled"],ye={key:0,class:"fas fa-spinner fa-spin mr-1"},we={key:1,class:"fas fa-save mr-1"},Me={__name:"CoreListFields",setup(Ce){const M=A(),k=i([]),l=i({current_page:1,per_page:10,total:0,from:0,to:0,last_page:1}),v=i(""),h=i(!1),b=i(!1),f=i(!1),g=i(10),o=i({id:null,code:"",name:"",description:"",order_number:null}),u=async(s=1)=>{h.value=!0;try{const a=(await _.get("/api/v1/list-fields",{params:{page:s,per_page:g.value,search:v.value}})).data.data;k.value=a.data||[],l.value={current_page:a.current_page,per_page:a.per_page,total:a.total,from:a.from,to:a.to,last_page:a.last_page}}catch(t){console.error("Gagal memuat list_fields:",t),t.response&&t.response.status===401&&M.logout()}finally{h.value=!1}},y=s=>{s<1||s>l.value.last_page||u(s)},K=()=>{b.value=!1,o.value={id:null,code:"",name:"",description:"",order_number:(l.value.total||0)+1},$("#listFieldModal").modal("show")},U=s=>{b.value=!0,o.value={id:s.id,code:s.code,name:s.name,description:s.description,order_number:s.order_number},$("#listFieldModal").modal("show")},L=async()=>{f.value=!0;const s={code:o.value.code,name:o.value.name,description:o.value.description,order_number:o.value.order_number};try{b.value&&o.value.id?await _.put(`/api/v1/list-fields/${o.value.id}`,s):await _.post("/api/v1/list-fields",s),$("#listFieldModal").modal("hide"),u(l.value.current_page)}catch(t){console.error("Gagal menyimpan list_field:",t),alert("Gagal menyimpan data komponen.")}finally{f.value=!1}},S=async s=>{if(confirm(`Yakin ingin menghapus komponen "${s.name}"?`))try{await _.delete(`/api/v1/list-fields/${s.id}`),u(l.value.current_page)}catch(t){console.error("Gagal menghapus list_field:",t),alert("Gagal menghapus komponen.")}};return w(()=>v.value,N(()=>u(1),400)),w(()=>g.value,()=>{u(1)}),D(()=>{u()}),(s,t)=>(r(),d(C,null,[e("section",{class:"content-header"},[e("div",{class:"container-fluid"},[e("div",{class:"d-flex justify-content-between align-items-center"},[t[8]||(t[8]=e("div",null,[e("h1",{class:"mb-1"},"Master Komponen Penilaian (List Fields)"),e("p",{class:"mb-0 text-muted text-sm"}," Digunakan untuk mendefinisikan komponen penilaian, misalnya: Lagu, Suara, Tajwid, Adab, Fashahah, dll. ")],-1)),e("button",{class:"btn btn-primary btn-sm",onClick:K}," + Tambah Komponen ")])])]),e("section",P,[e("div",E,[e("div",z,[e("div",H,[e("div",I,[e("div",J,[t[10]||(t[10]=e("label",{class:"mb-0 mr-1 text-sm text-muted"},"Tampilkan",-1)),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>g.value=a),class:"form-control form-control-sm w-auto mr-2"},t[9]||(t[9]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)]),512),[[j,g.value,void 0,{number:!0}]]),t[11]||(t[11]=e("label",{class:"mb-0 mr-1 text-sm text-muted"},"Entri",-1))]),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>v.value=a),type:"text",class:"form-control form-control-sm w-auto",style:{"min-width":"200px"},placeholder:"Cari Kode / Nama Komponen..."},null,512),[[p,v.value]])])]),e("div",q,[e("table",O,[t[16]||(t[16]=e("thead",{class:"thead-light"},[e("tr",null,[e("th",{style:{width:"40px"}},"#"),e("th",{style:{width:"120px"}},"Kode"),e("th",null,"Nama Komponen"),e("th",null,"Deskripsi"),e("th",{style:{width:"80px"},class:"text-center"},"Urutan"),e("th",{style:{width:"110px"},class:"text-center"},"Aksi")])],-1)),e("tbody",null,[h.value?(r(),d("tr",R,t[12]||(t[12]=[e("td",{colspan:"6",class:"text-center"},"Memuat data komponen...",-1)]))):k.value.length===0?(r(),d("tr",W,t[13]||(t[13]=[e("td",{colspan:"6",class:"text-center"},[c(" Belum ada data komponen penilaian. "),e("br"),e("small",{class:"text-muted"},[c(" Klik "),e("strong",null,"Tambah Komponen"),c(" untuk menambahkan. ")])],-1)]))):B("",!0),(r(!0),d(C,null,G(k.value,(a,V)=>(r(),d("tr",{key:a.id},[e("td",null,n(V+1+(l.value.current_page-1)*l.value.per_page),1),e("td",null,[e("code",null,n(a.code||"-"),1)]),e("td",null,[e("strong",null,n(a.name),1)]),e("td",null,n(a.description||"-"),1),e("td",Y,n(a.order_number||"-"),1),e("td",Q,[e("div",X,[e("button",{class:"btn btn-warning",onClick:T=>U(a)},t[14]||(t[14]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Z),e("button",{class:"btn btn-danger",onClick:T=>S(a)},t[15]||(t[15]=[e("i",{class:"fas fa-trash"},null,-1)]),8,ee)])])]))),128))])])]),e("div",te,[e("div",ae,[e("div",se," Menampilkan "+n(l.value.from||0)+" - "+n(l.value.to||0)+" dari "+n(l.value.total||0)+" komponen ",1),e("ul",le,[e("li",{class:F(["page-item",{disabled:l.value.current_page===1}])},[e("a",{href:"#",class:"page-link",onClick:t[2]||(t[2]=x(a=>y(l.value.current_page-1),["prevent"]))}," « ")],2),e("li",oe,[e("span",ne," Halaman "+n(l.value.current_page)+" / "+n(l.value.last_page||1),1)]),e("li",{class:F(["page-item",{disabled:l.value.current_page===l.value.last_page}])},[e("a",{href:"#",class:"page-link",onClick:t[3]||(t[3]=x(a=>y(l.value.current_page+1),["prevent"]))}," » ")],2)])])])])]),e("div",ie,[e("div",de,[e("div",re,[e("div",ue,[e("h5",me,[t[17]||(t[17]=e("i",{class:"fas fa-list-alt mr-1"},null,-1)),c(" "+n(b.value?"Edit Komponen Penilaian":"Tambah Komponen Penilaian"),1)]),t[18]||(t[18]=e("button",{type:"button",class:"close","data-dismiss":"modal"},[e("span",null,"×")],-1))]),e("div",pe,[e("form",{onSubmit:x(L,["prevent"])},[e("div",ce,[e("div",ve,[e("div",be,[t[19]||(t[19]=e("label",{class:"mb-1"},"Kode (opsional)",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.code=a),type:"text",class:"form-control form-control-sm",placeholder:"Contoh: LAGU, SUARA, TAJWID"},null,512),[[p,o.value.code]]),t[20]||(t[20]=e("small",{class:"text-muted"}," Kode singkat untuk memudahkan mapping ke konfigurasi lain. ",-1))]),e("div",fe,[t[21]||(t[21]=e("label",{class:"mb-1"},"Nama Komponen",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>o.value.name=a),type:"text",class:"form-control form-control-sm",required:""},null,512),[[p,o.value.name]])]),e("div",ge,[t[22]||(t[22]=e("label",{class:"mb-1"},"Urutan Tampil",-1)),m(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>o.value.order_number=a),type:"number",min:"1",class:"form-control form-control-sm"},null,512),[[p,o.value.order_number,void 0,{number:!0}]]),t[23]||(t[23]=e("small",{class:"text-muted"}," Urutan komponen saat tampil di form penilaian (boleh dikosongkan). ",-1))])]),e("div",_e,[e("div",ke,[t[24]||(t[24]=e("label",{class:"mb-1"},"Deskripsi",-1)),m(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=a=>o.value.description=a),rows:"5",class:"form-control form-control-sm",placeholder:"Contoh: Penilaian aspek tajwid meliputi makhraj, sifat huruf, panjang pendek, dan hukum bacaan."},null,512),[[p,o.value.description]])])])]),e("div",he,[e("button",{type:"submit",class:"btn btn-sm btn-primary",disabled:f.value},[f.value?(r(),d("i",ye)):(r(),d("i",we)),t[25]||(t[25]=c(" Simpan "))],8,xe)])],32)])])])])])],64))}};export{Me as default};
