import{B as w,F as c,G as C,J as P,P as v,Q as m,R as e,Z as T,ah as x,av as N,W as F,a5 as B,aw as Y,U as i,T as D,S as k,ap as M,V as q,X as A,Y as I}from"./pinia-BDOwh8JO.js";import{u as J,b as p}from"./app-D-g1j7c6.js";import{S as r}from"./sweetalert2.esm.all-9Qm2jZ7z.js";const z={class:"content-header"},K={class:"container-fluid"},Q={class:"d-flex justify-content-between align-items-center"},R=["disabled"],W={class:"content"},X={class:"container-fluid"},Z={class:"card"},O={class:"card-header"},ee={class:"card-body table-responsive p-0"},te={class:"table table-bordered table-hover text-sm mb-0"},ae={key:0},se={key:1},ne={class:"text-center"},le={class:"btn-group btn-group-sm"},oe=["onClick"],ie=["onClick"],re={class:"card-footer clearfix py-2"},de={class:"d-flex justify-content-between align-items-center"},ue={class:"text-muted text-sm"},ce={class:"pagination pagination-sm m-0"},ve={class:"page-item disabled"},me={class:"page-link"},pe={class:"modal fade",id:"eventDayModal"},fe={class:"modal-dialog"},be={class:"modal-content"},ge={class:"modal-header py-2"},he={class:"modal-title"},_e={class:"modal-body"},ye={class:"form-group"},xe={class:"form-group"},Be={__name:"EventDayList",setup(ke){const f=r.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),H=J(),E=w(()=>H.eventData||null),d=w(()=>{var s;return((s=E.value)==null?void 0:s.id)||null}),h=c([]),_=c(!1),b=c(!1),g=c(10),n=c({current_page:1,last_page:1,from:0,to:0,total:0}),l=c({id:null,date:"",label:""}),u=async(s=1)=>{if(d.value){_.value=!0;try{const t=await p.get("/api/v1/event-days",{params:{event_id:d.value,per_page:g.value,page:s}});h.value=t.data.data.data,n.value=t.data.data}catch{r.fire({icon:"error",title:"Gagal memuat hari event"})}finally{_.value=!1}}},S=async()=>{var t,o;if((await r.fire({title:"Generate ulang hari event?",text:"Data hari event lama akan dihapus",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, generate",cancelButtonText:"Batal"})).isConfirmed)try{await p.post(`/api/v1/event-days/generate/${d.value}`),f.fire({icon:"success",title:"Hari event berhasil digenerate"}),u()}catch(a){r.fire({icon:"error",title:"Gagal generate hari event",text:((o=(t=a.response)==null?void 0:t.data)==null?void 0:o.message)||"Terjadi kesalahan sistem"})}},V=()=>{b.value=!1,l.value={id:null,date:"",label:""},$("#eventDayModal").modal("show")},G=s=>{b.value=!0,l.value={...s},$("#eventDayModal").modal("show")},j=async()=>{var s,t;try{b.value?(await p.put(`/api/v1/event-days/${l.value.id}`,l.value),f.fire({icon:"success",title:"Hari event berhasil diperbarui"})):(await p.post("/api/v1/event-days",{...l.value,event_id:d.value}),f.fire({icon:"success",title:"Hari event berhasil ditambahkan"})),$("#eventDayModal").modal("hide"),u(n.value.current_page)}catch(o){r.fire({icon:"error",title:"Gagal menyimpan hari event",text:((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Terjadi kesalahan sistem"})}},U=async s=>{var o,a;if((await r.fire({title:"Hapus hari event?",text:`Tanggal ${s.date} akan dihapus`,icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus",cancelButtonText:"Batal"})).isConfirmed)try{await p.delete(`/api/v1/event-days/${s.id}`),f.fire({icon:"success",title:"Hari event berhasil dihapus"}),u(n.value.current_page)}catch(y){r.fire({icon:"error",title:"Gagal menghapus hari event",text:((a=(o=y.response)==null?void 0:o.data)==null?void 0:a.message)||"Terjadi kesalahan sistem"})}};return C(g,()=>u(1)),C(d,()=>u(1)),P(()=>{u()}),(s,t)=>{const o=q("router-link");return m(),v(B,null,[e("section",z,[e("div",K,[e("div",Q,[t[6]||(t[6]=e("div",null,[e("h1",{class:"mb-1"},"Event Days"),e("p",{class:"mb-0 text-muted text-sm"}," Manajemen hari dari event ")],-1)),e("div",null,[e("button",{class:"btn btn-success btn-sm mr-2",disabled:!d.value,onClick:S},t[5]||(t[5]=[e("i",{class:"fas fa-magic mr-1"},null,-1),T(" Generate dari Event ")]),8,R),e("button",{class:"btn btn-primary btn-sm",onClick:V}," + Tambah Hari ")])])])]),e("section",W,[e("div",X,[e("div",Z,[e("div",O,[e("div",null,[t[8]||(t[8]=e("label",{class:"mb-0 mr-1 text-sm text-muted"},"Tampilkan",-1)),x(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>g.value=a),class:"form-control form-control-sm d-inline-block w-auto"},t[7]||(t[7]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1)]),512),[[N,g.value,void 0,{number:!0}]]),t[9]||(t[9]=e("span",{class:"text-sm text-muted ml-1"},"Entri",-1))])]),e("div",ee,[e("table",te,[t[15]||(t[15]=e("thead",{class:"thead-light"},[e("tr",null,[e("th",{style:{width:"40px"}},"#"),e("th",null,"Tanggal"),e("th",null,"Label"),e("th",{style:{width:"180px"},class:"text-center"},"Aksi")])],-1)),e("tbody",null,[_.value?(m(),v("tr",ae,t[10]||(t[10]=[e("td",{colspan:"4",class:"text-center"},"Memuat data...",-1)]))):h.value.length===0?(m(),v("tr",se,t[11]||(t[11]=[e("td",{colspan:"4",class:"text-center text-muted"}," Belum ada hari event. ",-1)]))):F("",!0),(m(!0),v(B,null,Y(h.value,(a,y)=>(m(),v("tr",{key:a.id},[e("td",null,i(y+1+(n.value.current_page-1)*n.value.per_page),1),e("td",null,i(a.date),1),e("td",null,i(a.label||"-"),1),e("td",ne,[e("div",le,[A(o,{to:{name:"admin.sessions",query:{event_day_id:a.id}},class:"btn btn-info",title:"Kelola Jadwal"},{default:I(()=>t[12]||(t[12]=[e("i",{class:"fas fa-calendar-alt"},null,-1)])),_:2},1032,["to"]),e("button",{class:"btn btn-warning",onClick:L=>G(a)},t[13]||(t[13]=[e("i",{class:"fas fa-edit"},null,-1)]),8,oe),e("button",{class:"btn btn-danger",onClick:L=>U(a)},t[14]||(t[14]=[e("i",{class:"fas fa-trash"},null,-1)]),8,ie)])])]))),128))])])]),e("div",re,[e("div",de,[e("div",ue," Menampilkan "+i(n.value.from||0)+" – "+i(n.value.to||0)+" dari "+i(n.value.total||0)+" data ",1),e("ul",ce,[e("li",{class:D(["page-item",{disabled:n.value.current_page===1}])},[e("a",{href:"#",class:"page-link",onClick:t[1]||(t[1]=k(a=>s.changePage(n.value.current_page-1),["prevent"]))},"«")],2),e("li",ve,[e("span",me," Halaman "+i(n.value.current_page)+" / "+i(n.value.last_page),1)]),e("li",{class:D(["page-item",{disabled:n.value.current_page===n.value.last_page}])},[e("a",{href:"#",class:"page-link",onClick:t[2]||(t[2]=k(a=>s.changePage(n.value.current_page+1),["prevent"]))},"»")],2)])])])])]),e("div",pe,[e("div",fe,[e("div",be,[e("div",ge,[e("h5",he,i(b.value?"Edit Hari Event":"Tambah Hari Event"),1),t[16]||(t[16]=e("button",{type:"button",class:"close","data-dismiss":"modal"},[e("span",null,"×")],-1))]),e("div",_e,[e("form",{onSubmit:k(j,["prevent"])},[e("div",ye,[t[17]||(t[17]=e("label",null,"Tanggal",-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.date=a),type:"date",class:"form-control form-control-sm",required:""},null,512),[[M,l.value.date]])]),e("div",xe,[t[18]||(t[18]=e("label",null,"Label",-1)),x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>l.value.label=a),class:"form-control form-control-sm",placeholder:"Hari-1, Hari-2, dst"},null,512),[[M,l.value.label]])]),t[19]||(t[19]=e("div",{class:"text-right"},[e("button",{class:"btn btn-primary btn-sm"},[e("i",{class:"fas fa-save mr-1"}),T(" Simpan ")])],-1))],32)])])])])])],64)}}};export{Be as default};
