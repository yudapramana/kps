import{z as C,y as f,A as p,O as E,V as P,B as r,C as d,D as t,I as x,K as o,H as j,J as s,U as y,ay as H,a as k}from"./AuthUserStore-67h2FHdL.js";import{S as _}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{_ as J}from"./app-CZBZEz52.js";const K={class:"content-header"},D={class:"container-fluid"},T={class:"d-flex justify-content-between align-items-center"},M={class:"d-flex gap-2"},V=["disabled"],G=["disabled"],U=["disabled"],z={key:0,class:"text-danger text-sm mt-2 mb-0"},A={class:"content"},F={class:"container-fluid"},L={class:"card"},$={class:"card-body table-responsive p-0"},O={class:"table table-bordered table-hover text-sm mb-0"},R={class:"bg-light"},Y={colspan:"9",class:"text-center py-2"},q={class:"text-muted text-sm"},Q={key:0},W={key:0},X={key:1},Z={class:"text-center"},tt={class:"text-center"},et={class:"badge badge-warning"},at={class:"text-center"},st={class:"badge badge-secondary"},nt={class:"text-center"},lt={class:"badge badge-secondary"},it={class:"text-center"},ot={class:"badge badge-light"},rt={class:"text-center"},dt={class:"badge badge-light"},ct={class:"text-center"},ut={class:"badge badge-light"},pt={class:"text-center font-weight-bold"},_t={__name:"EventContingentStandings",setup(gt){const w=C(),c=f(()=>w.eventData||null),a=f(()=>{var i;return((i=c.value)==null?void 0:i.id)||null}),g=p([]),u=p(!1),h=p(!1),l=p(!1),v=async()=>{if(a.value){u.value=!0;try{const i=await k.get("/api/v1/event-contingent-standings",{params:{event_id:a.value}});g.value=i.data.data||[]}catch{_.fire("Gagal","Gagal memuat klasemen kontingen.","error")}finally{u.value=!1}}},I=async()=>{if(!(!a.value||l.value||!(await _.fire({title:"Hitung Klasemen?",text:"Proses ini mungkin membutuhkan waktu beberapa saat.",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hitung",cancelButtonText:"Batal"})).isConfirmed)){l.value=!0;try{await k.post("/api/v1/event-contingent-standings/build",{event_id:a.value}),await v(),_.fire("Selesai","Perhitungan klasemen berhasil diselesaikan.","success")}catch{_.fire("Gagal","Terjadi kesalahan saat menghitung klasemen.","error")}finally{l.value=!1}}},N=()=>{a.value&&window.open(`/api/v1/event-contingent-standings/export/excel?event_id=${a.value}`,"_blank")},S=()=>{a.value&&window.open(`/api/v1/event-contingent-standings/export/pdf?event_id=${a.value}`,"_blank")};return E(a,i=>{i&&v()}),P(()=>{a.value&&v()}),(i,e)=>{var m,b;return d(),r(y,null,[t("section",K,[t("div",D,[t("div",T,[e[2]||(e[2]=t("div",null,[t("h1",{class:"mb-1"},"Klasemen Perolehan Juara Kontingen"),t("p",{class:"mb-0 text-muted text-sm"}," Rekap perolehan juara dan total poin setiap kontingen pada event aktif. ")],-1)),t("div",M,[t("button",{class:"btn btn-outline-success btn-sm mr-2",onClick:N,disabled:!a.value||h.value||l.value},e[0]||(e[0]=[t("i",{class:"fas fa-file-excel mr-1"},null,-1),o(" Export Excel ")]),8,V),t("button",{class:"btn btn-outline-danger btn-sm mr-2",onClick:S,disabled:!a.value||h.value||l.value},e[1]||(e[1]=[t("i",{class:"fas fa-file-pdf mr-1"},null,-1),o(" Export PDF ")]),8,G),t("button",{class:"btn btn-primary btn-sm",onClick:I,disabled:!a.value||u.value||h.value||l.value},[t("i",{class:j(["fas mr-1",l.value?"fa-spinner fa-spin":"fa-calculator"])},null,2),o(" "+s(l.value?"Menghitung...":"Hitung Klasemen"),1)],8,U)])]),a.value?x("",!0):(d(),r("p",z,e[3]||(e[3]=[t("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1),o(" Event belum dipilih. Silakan pilih event melalui Portal Event. ")])))])]),t("section",A,[t("div",F,[t("div",L,[t("div",$,[t("table",O,[t("thead",null,[t("tr",R,[t("th",Y,[e[4]||(e[4]=t("div",{class:"font-weight-bold text-uppercase"}," Daftar Perolehan Juara per Kontingen ",-1)),t("div",q,[o(s((m=c.value)==null?void 0:m.event_name)+" ",1),(b=c.value)!=null&&b.event_year?(d(),r("span",Q," ("+s(c.value.event_year)+") ",1)):x("",!0)])])]),e[5]||(e[5]=t("tr",{class:"thead-light"},[t("th",{rowspan:"2",style:{width:"40px"},class:"text-center align-middle"},"No"),t("th",{rowspan:"2",class:"align-middle"},"Kontingen"),t("th",{colspan:"6",class:"text-center"},"Perolehan Juara"),t("th",{rowspan:"2",style:{width:"90px"},class:"text-center align-middle"},[o(" Total"),t("br"),o("Poin ")])],-1)),e[6]||(e[6]=t("tr",{class:"thead-light text-center"},[t("th",{style:{width:"70px"}},"Juara I"),t("th",{style:{width:"70px"}},"Juara II"),t("th",{style:{width:"70px"}},"Juara III"),t("th",{style:{width:"80px"}},"Har. I"),t("th",{style:{width:"80px"}},"Har. II"),t("th",{style:{width:"80px"}},"Har. III")],-1))]),t("tbody",null,[u.value?(d(),r("tr",W,e[7]||(e[7]=[t("td",{colspan:"9",class:"text-center text-muted py-3"},[t("i",{class:"fas fa-spinner fa-spin mr-1"}),o(" Memuat klasemen kontingen... ")],-1)]))):g.value.length===0?(d(),r("tr",X,e[8]||(e[8]=[t("td",{colspan:"9",class:"text-center text-muted py-3"}," Belum ada data perolehan juara untuk event ini. ",-1)]))):(d(!0),r(y,{key:2},H(g.value,(n,B)=>(d(),r("tr",{key:n.region_name},[t("td",Z,s(B+1),1),t("td",null,[t("strong",null,s(n.region_name),1)]),t("td",tt,[t("span",et,s(Number(n.juara_1)),1)]),t("td",at,[t("span",st,s(Number(n.juara_2)),1)]),t("td",nt,[t("span",lt,s(Number(n.juara_3)),1)]),t("td",it,[t("span",ot,s(Number(n.harapan_1)),1)]),t("td",rt,[t("span",dt,s(Number(n.harapan_2)),1)]),t("td",ct,[t("span",ut,s(Number(n.harapan_3)),1)]),t("td",pt,s(Number(n.total_point)),1)]))),128))])])])])])])],64)}}},bt=J(_t,[["__scopeId","data-v-21857939"]]);export{bt as default};
