import{F as d,G as C,J as A,P as c,Q as p,R as t,ah as r,av as M,ap as u,W as F,a5 as T,aw as P,U as o,T as w,S as B,Z as D}from"./pinia-BDOwh8JO.js";import{b as k,e as E}from"./app-D-g1j7c6.js";import{S as v}from"./sweetalert2.esm.all-9Qm2jZ7z.js";const q={class:"content"},G={class:"container-fluid"},L={class:"card"},R={class:"card-header"},H={class:"d-flex justify-content-between align-items-center w-100"},I={class:"card-body table-responsive p-0"},z={class:"table table-bordered table-hover text-sm mb-0"},J={key:0},K={key:1},Q={class:"text-muted text-xs"},W={class:"text-center"},Y={class:"text-center"},Z={class:"btn-group btn-group-sm"},O=["onClick"],X=["onClick"],tt={class:"card-footer clearfix py-2"},et={class:"d-flex justify-content-between align-items-center"},at={class:"text-muted text-sm"},st={class:"pagination pagination-sm m-0"},nt={class:"page-item disabled"},lt={class:"page-link"},ot={class:"modal fade",id:"bankModal"},it={class:"modal-dialog"},rt={class:"modal-content"},dt={class:"modal-header py-2"},ut={class:"modal-body"},mt={class:"form-group"},ct={class:"form-group"},pt={class:"form-group"},vt={class:"form-group"},bt={class:"form-group"},ft={class:"form-group"},ht={__name:"BankList",setup(gt){const _=v.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),x=d([]),n=d({}),b=d(""),f=d(10),h=d(!1),g=d(!1),s=d({id:null,code:"",name:"",account_number:"",account_name:"",admin_fee:0,is_active:!0}),m=async(l=1)=>{var e,a;h.value=!0;try{const i=await k.get("/api/v1/banks",{params:{page:l,per_page:f.value,search:b.value}});x.value=i.data.data.data,n.value=i.data.data}catch(i){v.fire({icon:"error",title:"Gagal memuat data bank",text:((a=(e=i.response)==null?void 0:e.data)==null?void 0:a.message)||"Terjadi kesalahan sistem"})}finally{h.value=!1}},N=()=>{g.value=!1,s.value={id:null,code:"",name:"",account_number:"",account_name:"",admin_fee:0,is_active:!0},$("#bankModal").modal("show")},V=l=>{g.value=!0,s.value={...l},$("#bankModal").modal("show")},S=async()=>{var e,a;const l={...s.value};try{g.value?(await k.put(`/api/v1/banks/${s.value.id}`,l),_.fire({icon:"success",title:"Bank berhasil diperbarui"})):(await k.post("/api/v1/banks",l),_.fire({icon:"success",title:"Bank berhasil ditambahkan"})),$("#bankModal").modal("hide"),m(n.value.current_page)}catch(i){v.fire({icon:"error",title:"Gagal menyimpan bank",text:((a=(e=i.response)==null?void 0:e.data)==null?void 0:a.message)||"Terjadi kesalahan sistem"})}},U=async l=>{var a,i;if((await v.fire({title:"Hapus bank?",text:`Bank "${l.name}" akan dihapus`,icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus",cancelButtonText:"Batal"})).isConfirmed)try{await k.delete(`/api/v1/banks/${l.id}`),_.fire({icon:"success",title:"Bank berhasil dihapus"}),m(n.value.current_page)}catch(y){v.fire({icon:"error",title:"Gagal menghapus bank",text:((i=(a=y.response)==null?void 0:a.data)==null?void 0:i.message)||"Terjadi kesalahan sistem"})}},j=l=>Number(l).toLocaleString("id-ID");return C(b,E(()=>m(1),400)),C(f,()=>m(1)),A(()=>m()),(l,e)=>(p(),c(T,null,[t("section",{class:"content-header"},[t("div",{class:"container-fluid"},[t("div",{class:"d-flex justify-content-between align-items-center"},[e[10]||(e[10]=t("div",null,[t("h1",{class:"mb-1"},"Banks"),t("p",{class:"mb-0 text-muted text-sm"}," Manajemen rekening bank tujuan pembayaran. ")],-1)),t("button",{class:"btn btn-primary btn-sm",onClick:N}," + Tambah Bank ")])])]),t("section",q,[t("div",G,[t("div",L,[t("div",R,[t("div",H,[t("div",null,[e[12]||(e[12]=t("label",{class:"mb-0 mr-1 text-sm text-muted"},"Tampilkan",-1)),r(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),class:"form-control form-control-sm d-inline-block w-auto"},e[11]||(e[11]=[t("option",{value:10},"10",-1),t("option",{value:25},"25",-1),t("option",{value:50},"50",-1)]),512),[[M,f.value,void 0,{number:!0}]]),e[13]||(e[13]=t("span",{class:"text-sm text-muted ml-1"},"Entri",-1))]),r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>b.value=a),type:"text",class:"form-control form-control-sm w-auto",style:{"min-width":"220px"},placeholder:"Cari bank / no rekening..."},null,512),[[u,b.value]])])]),t("div",I,[t("table",z,[e[18]||(e[18]=t("thead",{class:"thead-light"},[t("tr",null,[t("th",{style:{width:"40px"}},"#"),t("th",null,"Bank"),t("th",null,"No. Rekening"),t("th",null,"Atas Nama"),t("th",{style:{width:"120px"}},"Admin Fee"),t("th",{style:{width:"80px"},class:"text-center"},"Status"),t("th",{style:{width:"110px"},class:"text-center"},"Aksi")])],-1)),t("tbody",null,[h.value?(p(),c("tr",J,e[14]||(e[14]=[t("td",{colspan:"7",class:"text-center"},"Memuat data...",-1)]))):x.value.length===0?(p(),c("tr",K,e[15]||(e[15]=[t("td",{colspan:"7",class:"text-center text-muted"}," Belum ada bank. ",-1)]))):F("",!0),(p(!0),c(T,null,P(x.value,(a,i)=>(p(),c("tr",{key:a.id},[t("td",null,o(i+1+(n.value.current_page-1)*n.value.per_page),1),t("td",null,[t("strong",null,o(a.name),1),t("div",Q,o(a.code),1)]),t("td",null,o(a.account_number),1),t("td",null,o(a.account_name),1),t("td",null,"Rp "+o(j(a.admin_fee)),1),t("td",W,[t("span",{class:w(["badge",a.is_active?"badge-success":"badge-secondary"])},o(a.is_active?"Aktif":"Nonaktif"),3)]),t("td",Y,[t("div",Z,[t("button",{class:"btn btn-warning",onClick:y=>V(a)},e[16]||(e[16]=[t("i",{class:"fas fa-edit"},null,-1)]),8,O),t("button",{class:"btn btn-danger",onClick:y=>U(a)},e[17]||(e[17]=[t("i",{class:"fas fa-trash"},null,-1)]),8,X)])])]))),128))])])]),t("div",tt,[t("div",et,[t("div",at," Menampilkan "+o(n.value.from||0)+" - "+o(n.value.to||0)+" dari "+o(n.value.total||0)+" data ",1),t("ul",st,[t("li",{class:w(["page-item",{disabled:n.value.current_page===1}])},[t("a",{href:"#",class:"page-link",onClick:e[2]||(e[2]=B(a=>l.changePage(n.value.current_page-1),["prevent"]))},"«")],2),t("li",nt,[t("span",lt," Halaman "+o(n.value.current_page)+" / "+o(n.value.last_page),1)]),t("li",{class:w(["page-item",{disabled:n.value.current_page===n.value.last_page}])},[t("a",{href:"#",class:"page-link",onClick:e[3]||(e[3]=B(a=>l.changePage(n.value.current_page+1),["prevent"]))},"»")],2)])])])])]),t("div",ot,[t("div",it,[t("div",rt,[t("div",dt,[t("h5",null,o(g.value?"Edit Bank":"Tambah Bank"),1),e[19]||(e[19]=t("button",{class:"close","data-dismiss":"modal"},"×",-1))]),t("div",ut,[t("form",{onSubmit:B(S,["prevent"])},[t("div",mt,[e[20]||(e[20]=t("label",null,"Kode Bank",-1)),r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.code=a),class:"form-control form-control-sm",required:""},null,512),[[u,s.value.code]])]),t("div",ct,[e[21]||(e[21]=t("label",null,"Nama Bank",-1)),r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.name=a),class:"form-control form-control-sm",required:""},null,512),[[u,s.value.name]])]),t("div",pt,[e[22]||(e[22]=t("label",null,"No. Rekening",-1)),r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.value.account_number=a),class:"form-control form-control-sm",required:""},null,512),[[u,s.value.account_number]])]),t("div",vt,[e[23]||(e[23]=t("label",null,"Atas Nama",-1)),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>s.value.account_name=a),class:"form-control form-control-sm",required:""},null,512),[[u,s.value.account_name]])]),t("div",bt,[e[24]||(e[24]=t("label",null,"Admin Fee",-1)),r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>s.value.admin_fee=a),type:"number",min:"0",class:"form-control form-control-sm"},null,512),[[u,s.value.admin_fee,void 0,{number:!0}]])]),t("div",ft,[e[26]||(e[26]=t("label",null,"Status",-1)),r(t("select",{"onUpdate:modelValue":e[9]||(e[9]=a=>s.value.is_active=a),class:"form-control form-control-sm"},e[25]||(e[25]=[t("option",{value:!0},"Aktif",-1),t("option",{value:!1},"Nonaktif",-1)]),512),[[M,s.value.is_active]])]),e[27]||(e[27]=t("div",{class:"text-right"},[t("button",{class:"btn btn-primary btn-sm"},[t("i",{class:"fas fa-save mr-1"}),D(" Simpan ")])],-1))],32)])])])])])],64))}};export{ht as default};
