import{A as _,z as C,a1 as N,B as i,C as n,D as s,I as m,G as l,J as d,ax as V,F as b,S as c,as as p,aB as B,K as g,U as K}from"./AuthUserStore-67h2FHdL.js";import{u as j}from"./toastr-Bo3tjpk-.js";import{a as D}from"./app-CZBZEz52.js";const E={class:"content-header"},I={class:"container-fluid"},F={class:"row mb-2"},L={key:0,class:"col-sm-6"},M={class:"content"},z={class:"container-fluid"},A={class:"row",style:{"margin-bottom":"100px"}},T={class:"col-md-3"},J={class:"card card-primary card-outline"},W={class:"card-body box-profile"},G={class:"text-center"},H=["src"],$={class:"profile-username text-center"},q={class:"text-muted text-center"},O={class:"col-md-9"},Q={class:"card"},R={class:"card-body"},X={class:"tab-content"},Y={class:"tab-pane active",id:"profile"},Z={class:"form-group row"},ss={class:"col-sm-10"},as={key:0,class:"text-danger text-sm"},es={class:"form-group row"},os={class:"col-sm-10"},ts={key:0,class:"text-danger text-sm"},ls={class:"form-group row"},rs={class:"col-sm-10"},is={key:0,class:"text-danger text-sm"},ns={class:"form-group row"},ds={class:"col-sm-10"},us={key:0,class:"text-danger text-sm"},ms={class:"form-group row"},cs={class:"col-sm-10"},ps={key:0,class:"text-danger text-sm"},fs={class:"form-group row"},vs={class:"col-sm-10"},_s={key:0,class:"text-danger text-sm"},bs={class:"tab-pane",id:"changePassword"},gs={class:"form-group row"},ws={class:"col-sm-9"},ys={key:0,class:"text-danger text-sm"},ks={class:"form-group row"},hs={class:"col-sm-9"},xs={key:0,class:"text-danger text-sm"},Ps={class:"form-group row"},Ss={class:"col-sm-9"},Bs={__name:"UpdateProfile",setup(Us){const y=D(),v=_(""),k=window.cloudinary.createUploadWidget({cloud_name:"kemenagpessel",upload_preset:"profile_picture_pegawai"},(r,a)=>{!r&&a&&a.event==="success"&&(console.log("Done Uploading...",a.info),v.value=a.info.secure_url),!r&&a&&a.event=="close"&&U()});function h(){k.open()}const o=C(),f=j(),e=_([]),x=()=>{axios.put("/api/profile",{name:o.user.name,email:o.user.email,role:o.user.role,nama_pemeriksa:o.user.nama_pemeriksa,nip_pemeriksa:o.user.nip_pemeriksa,jabatan:o.user.jabatan,print_layout:o.user.print_layout}).then(r=>{f.success("Profile updated successfully!")}).catch(r=>{r.response&&r.response.status===422&&(e.value=r.response.data.errors)})},P=()=>{o.logout()},u=N({currentPassword:"",password:"",passwordConfirmation:""}),S=()=>{e.value="",axios.post("/api/change-user-password",u).then(r=>{f.success(r.data.message);for(const a in u)u[a]=""}).catch(r=>{r.response&&r.response.status===422&&(e.value=r.response.data.errors)})};_(null);const U=r=>{v.value!=""?axios.post("/api/upload-profile-image",{profile_picture:v.value}).then(a=>{o.getAuthUser(),f.success("Image uploaded successfully!")}):f.error("Image failed to upload!")};return(r,a)=>{var w;return n(),i(K,null,[s("div",E,[s("div",I,[s("div",F,[a[11]||(a[11]=s("div",{class:"col-sm-6"},[s("h1",{class:"m-0"},"Profile")],-1)),l(y).isMobile?m("",!0):(n(),i("div",L,a[10]||(a[10]=[s("ol",{class:"breadcrumb float-sm-right"},[s("li",{class:"breadcrumb-item"},[s("a",{href:"#"},"Home")]),s("li",{class:"breadcrumb-item active"},"Profile")],-1)])))])])]),s("div",M,[s("div",z,[s("div",A,[s("div",T,[s("div",J,[s("div",W,[s("div",G,[s("img",{onClick:h,class:"profile-user-img img-circle",src:(w=l(o).user)==null?void 0:w.avatar,alt:"User profile picture"},null,8,H)]),s("h3",$,d(l(o).user.name),1),s("p",q,d(l(o).user.role),1)])])]),s("div",O,[s("div",Q,[a[24]||(a[24]=V('<div class="card-header p-2"><ul class="nav nav-pills"><li class="nav-item"><a class="nav-link active" href="#profile" data-toggle="tab"><i class="fa fa-user mr-1"></i> Edit Profile</a></li><li class="nav-item"><a class="nav-link" href="#changePassword" data-toggle="tab"><i class="fa fa-key mr-1"></i> Change Password</a></li></ul></div>',1)),s("div",R,[s("div",X,[s("div",Y,[s("form",{onSubmit:a[6]||(a[6]=b(t=>x(),["prevent"])),class:"form-horizontal"},[s("div",Z,[a[12]||(a[12]=s("label",{for:"inputName",class:"col-sm-2 col-form-label"},"Name",-1)),s("div",ss,[c(s("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>l(o).user.name=t),type:"text",class:"form-control",id:"inputName",placeholder:"Name"},null,512),[[p,l(o).user.name]]),e.value&&e.value.name?(n(),i("span",as,d(e.value.name[0]),1)):m("",!0)])]),s("div",es,[a[13]||(a[13]=s("label",{for:"inputEmail",class:"col-sm-2 col-form-label"},"Email",-1)),s("div",os,[c(s("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>l(o).user.email=t),type:"email",class:"form-control",id:"inputEmail",placeholder:"Email"},null,512),[[p,l(o).user.email]]),e.value&&e.value.email?(n(),i("span",ts,d(e.value.email[0]),1)):m("",!0)])]),s("div",ls,[a[14]||(a[14]=s("label",{for:"jabatan",class:"col-sm-2 col-form-label"},"Jabatan",-1)),s("div",rs,[c(s("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>l(o).user.jabatan=t),type:"text",class:"form-control",id:"jabatan",placeholder:"Nama Pemeriksa"},null,512),[[p,l(o).user.jabatan]]),e.value&&e.value.jabatan?(n(),i("span",is,d(e.value.jabatan[0]),1)):m("",!0)])]),s("div",ns,[a[15]||(a[15]=s("label",{for:"nama_pemeriksa",class:"col-sm-2 col-form-label"},"Nama Pemeriksa",-1)),s("div",ds,[c(s("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>l(o).user.nama_pemeriksa=t),type:"text",class:"form-control",id:"nama_pemeriksa",placeholder:"Nama Pemeriksa"},null,512),[[p,l(o).user.nama_pemeriksa]]),e.value&&e.value.nama_pemeriksa?(n(),i("span",us,d(e.value.nama_pemeriksa[0]),1)):m("",!0)])]),s("div",ms,[a[16]||(a[16]=s("label",{for:"nip_pemeriksa",class:"col-sm-2 col-form-label"},"NIP Pemeriksa",-1)),s("div",cs,[c(s("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>l(o).user.nip_pemeriksa=t),type:"text",class:"form-control",id:"nip_pemeriksa",placeholder:"Nama Pemeriksa"},null,512),[[p,l(o).user.nip_pemeriksa]]),e.value&&e.value.nip_pemeriksa?(n(),i("span",ps,d(e.value.nip_pemeriksa[0]),1)):m("",!0)])]),s("div",fs,[a[18]||(a[18]=s("label",{for:"print_layout",class:"col-sm-2 col-form-label"},"Print Layout",-1)),s("div",vs,[c(s("select",{"onUpdate:modelValue":a[5]||(a[5]=t=>l(o).user.print_layout=t),name:"print_layout",id:"print_layout",class:"form-control"},a[17]||(a[17]=[s("option",{value:"L"},"Landscape",-1),s("option",{value:"P"},"Portrait",-1)]),512),[[B,l(o).user.print_layout]]),e.value&&e.value.print_layout?(n(),i("span",_s,d(e.value.print_layout[0]),1)):m("",!0)])]),a[19]||(a[19]=s("div",{class:"form-group row"},[s("div",{class:"offset-sm-2 col-sm-10"},[s("button",{type:"submit",class:"btn btn-success"},[s("i",{class:"fa fa-save mr-1"}),g(" Save Changes")])])],-1))],32)]),s("div",bs,[s("form",{onSubmit:b(S,["prevent"]),class:"form-horizontal"},[s("div",gs,[a[20]||(a[20]=s("label",{for:"currentPassword",class:"col-sm-3 col-form-label"},"Kata Sandi Saat Ini",-1)),s("div",ws,[c(s("input",{"onUpdate:modelValue":a[7]||(a[7]=t=>u.currentPassword=t),type:"password",class:"form-control",id:"currentPassword",placeholder:"Kata Sandi Saat Ini"},null,512),[[p,u.currentPassword]]),e.value&&e.value.current_password?(n(),i("span",ys,d(e.value.current_password[0]),1)):m("",!0)])]),s("div",ks,[a[21]||(a[21]=s("label",{for:"newPassword",class:"col-sm-3 col-form-label"},"Kata Sandi Baru",-1)),s("div",hs,[c(s("input",{"onUpdate:modelValue":a[8]||(a[8]=t=>u.password=t),type:"password",class:"form-control",id:"newPassword",placeholder:"Kata Sandi Baru"},null,512),[[p,u.password]]),e.value&&e.value.password?(n(),i("span",xs,d(e.value.password[0]),1)):m("",!0)])]),s("div",Ps,[a[22]||(a[22]=s("label",{for:"passwordConfirmation",class:"col-sm-3 col-form-label"},"Konfirmasi Kata Sandi Baru",-1)),s("div",Ss,[c(s("input",{"onUpdate:modelValue":a[9]||(a[9]=t=>u.passwordConfirmation=t),type:"password",class:"form-control",id:"passwordConfirmation",placeholder:"Konfirmasi Kata Sandi Baru"},null,512),[[p,u.passwordConfirmation]])])]),a[23]||(a[23]=s("div",{class:"form-group row"},[s("div",{class:"offset-sm-3 col-sm-9"},[s("button",{type:"submit",class:"btn btn-success"},[s("i",{class:"fa fa-save mr-1"}),g(" Save Changes")])])],-1))],32)])])])]),s("button",{onClick:b(P,["prevent"]),type:"button",class:"btn btn-danger btn-block"},a[25]||(a[25]=[s("i",{class:"fas fa-sign-out-alt"},null,-1),g(" Logout")]))])])])])],64)}}};export{Bs as default};
